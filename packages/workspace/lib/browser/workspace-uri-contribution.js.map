{"version":3,"sources":["browser/workspace-uri-contribution.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,GAAG,MAAM,2BAA2B,CAAC;AAC5C,OAAO,EAAC,mCAAmC,EAAE,gBAAgB,EAAC,MAAM,wBAAwB,CAAC;AAC7F,OAAO,EAAC,QAAQ,EAAC,MAAM,mCAAmC,CAAC;AAC3D,OAAO,EAAC,UAAU,EAAE,aAAa,EAAC,MAAM,WAAW,CAAC;AAGpD,IAAa,qCAAqC,GAAlD,MAAa,qCAAsC,SAAQ,mCAAmC;IAG5F,KAAK,CAAC,IAAI;QACR,gCAAgC;IAClC,CAAC;IAED,SAAS,CAAC,OAAe;QACvB,IAAI,CAAC,OAAO,YAAY,GAAG,IAAI,OAAO,CAAC,MAAM,KAAK,MAAM,IAAI,gBAAgB,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE;YACjH,OAAO,EAAE,CAAC;SACX;QACD,OAAO,CAAC,CAAC;IACX,CAAC;IAED,OAAO,CAAC,OAA0C;QAChD,OAAO,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC;IACzD,CAAC;IAED,OAAO,CAAC,OAA0C;QAChD,OAAO,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC;IACzD,CAAC;IAED;;OAEG;IACH,WAAW,CAAC,OAA0C;QACpD,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACjC,IAAI,GAAG,EAAE;YACP,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YAC5C,IAAI,UAAU,EAAE;gBACd,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;aACxC;SACF;QACD,oFAAoF;QACpF,MAAM,YAAY,GAAG,GAAG,CAAC;QACzB,OAAO,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC;IAC7D,CAAC;IAES,kBAAkB,CAAC,OAA0C;QACrE,IAAI,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE;YACxB,OAAO,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;SAC3F;QACD,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACjC,8EAA8E;QAC9E,qDAAqD;QACrD,IAAI;QACJ,OAAO,OAAO,CAAC;IACjB,CAAC;IAES,MAAM,CAAC,OAA0C;QACzD,IAAI,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE;YACxB,OAAO,OAAO,CAAC,QAAQ,CAAC;SACzB;QACD,OAAO,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;CACF,CAAA;AApDC;IADC,aAAa,EAAE;iEAGf;AALU,qCAAqC;IADjD,UAAU,EAAE;GACA,qCAAqC,CAuDjD;SAvDY,qCAAqC","file":"../../src/browser/workspace-uri-contribution.js","sourcesContent":["import URI from '@tart/core/lib/common/uri';\r\nimport {DefaultUriLabelProviderContribution, URIIconReference} from '@tart/core/lib/browser';\r\nimport {FileStat} from '@tart/filesystem/lib/common/files';\r\nimport {injectable, postConstruct} from 'inversify';\r\n\r\n@injectable()\r\nexport class WorkspaceUriLabelProviderContribution extends DefaultUriLabelProviderContribution {\r\n\r\n  @postConstruct()\r\n  async init(): Promise<void> {\r\n    // no-op, backward compatibility\r\n  }\r\n\r\n  canHandle(element: object): number {\r\n    if ((element instanceof URI && element.scheme === 'file' || URIIconReference.is(element) || FileStat.is(element))) {\r\n      return 10;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  getIcon(element: URI | URIIconReference | FileStat): string {\r\n    return super.getIcon(this.asURIIconReference(element));\r\n  }\r\n\r\n  getName(element: URI | URIIconReference | FileStat): string | undefined {\r\n    return super.getName(this.asURIIconReference(element));\r\n  }\r\n\r\n  /**\r\n   * trims the workspace root from a file uri, if it is a child.\r\n   */\r\n  getLongName(element: URI | URIIconReference | FileStat): string | undefined {\r\n    const uri = this.getUri(element);\r\n    if (uri) {\r\n      const formatting = this.findFormatting(uri);\r\n      if (formatting) {\r\n        return this.formatUri(uri, formatting);\r\n      }\r\n    }\r\n    // const relativePath = uri && this.workspaceVariable.getWorkspaceRelativePath(uri);\r\n    const relativePath = uri;\r\n    return super.getLongName(this.asURIIconReference(element));\r\n  }\r\n\r\n  protected asURIIconReference(element: URI | URIIconReference | FileStat): URI | URIIconReference {\r\n    if (FileStat.is(element)) {\r\n      return URIIconReference.create(element.isDirectory ? 'folder' : 'file', element.resource);\r\n    }\r\n    const uri = this.getUri(element);\r\n    // if (uri && this.workspaceVariable.getWorkspaceRootUri(uri)?.isEqual(uri)) {\r\n    //     return URIIconReference.create('folder', uri);\r\n    // }\r\n    return element;\r\n  }\r\n\r\n  protected getUri(element: URI | URIIconReference | FileStat): URI | undefined {\r\n    if (FileStat.is(element)) {\r\n      return element.resource;\r\n    }\r\n    return super.getUri(element);\r\n  }\r\n}\r\n"]}