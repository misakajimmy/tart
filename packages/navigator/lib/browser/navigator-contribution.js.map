{"version":3,"sources":["browser/navigator-contribution.ts"],"names":[],"mappings":"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","file":"../../src/browser/navigator-contribution.js","sourcesContent":["import {inject, injectable, postConstruct} from 'inversify';\r\nimport {\r\n  AbstractViewContribution,\r\n  codicon,\r\n  CommonCommands,\r\n  FrontendApplication,\r\n  FrontendApplicationContribution,\r\n  KeybindingRegistry,\r\n  Navigatable,\r\n  SelectableTreeNode,\r\n  Widget\r\n} from '@tart/core';\r\nimport {FILE_NAVIGATOR_ID, FileNavigatorWidget} from './navigator-widget';\r\nimport {EXPLORER_VIEW_CONTAINER_ID, EXPLORER_VIEW_CONTAINER_TITLE_OPTIONS} from './navigator-widget-factory';\r\nimport {\r\n  Command,\r\n  CommandContribution,\r\n  CommandRegistry,\r\n  DisposableCollection,\r\n  isOSX,\r\n  isWindows,\r\n  MenuContribution,\r\n  MenuModelRegistry,\r\n  MenuPath,\r\n  Mutable\r\n} from '@tart/core/lib/common';\r\nimport {\r\n  TabBarToolbarContribution,\r\n  TabBarToolbarItem,\r\n  TabBarToolbarRegistry\r\n} from '@tart/core/lib/browser/shell/tab-bar-toolbar';\r\nimport {FileNavigatorPreferences} from './navigator-preferences';\r\nimport {NavigatorContextKeyService} from './navigator-context-key-service';\r\nimport {\r\n  DidCreateNewResourceEvent,\r\n  WorkspaceCommandContribution,\r\n  WorkspaceCommands,\r\n  WorkspacePreferences,\r\n  WorkspaceService\r\n} from '@tart/workspace';\r\nimport {nls} from '@tart/core/lib/common/nls';\r\nimport {FileNavigatorModel} from './navigator-model';\r\nimport {DirNode, FileSystemCommands} from '@tart/filesystem';\r\nimport {NavigatorDiffCommands} from './navigator-diff';\r\nimport {OpenEditorsContextMenu, OpenEditorsWidget} from './open-editors-widget';\r\nimport {NavigatorKeybindingContexts} from './navigator-keybinding-context';\r\nimport {FileDownloadCommands} from '@tart/filesystem/lib/browser/download/file-download-command-contribution';\r\n\r\nexport namespace FileNavigatorCommands {\r\n  export const REVEAL_IN_NAVIGATOR = Command.toLocalizedCommand({\r\n    id: 'navigator.reveal',\r\n    label: 'Reveal in Explorer'\r\n  }, 'wm/navigator/reveal');\r\n  export const TOGGLE_HIDDEN_FILES = Command.toLocalizedCommand({\r\n    id: 'navigator.toggle.hidden.files',\r\n    label: 'Toggle Hidden Files'\r\n  }, 'wm/navigator/toggleHiddenFiles');\r\n  export const TOGGLE_AUTO_REVEAL = Command.toLocalizedCommand({\r\n    id: 'navigator.toggle.autoReveal',\r\n    category: CommonCommands.FILE_CATEGORY,\r\n    label: 'Auto Reveal'\r\n  }, 'wm/navigator/autoReveal', CommonCommands.FILE_CATEGORY_KEY);\r\n  export const REFRESH_NAVIGATOR = Command.toLocalizedCommand({\r\n    id: 'navigator.refresh',\r\n    category: CommonCommands.FILE_CATEGORY,\r\n    label: 'Refresh in Explorer',\r\n    iconClass: codicon('refresh')\r\n  }, 'wm/navigator/refresh', CommonCommands.FILE_CATEGORY_KEY);\r\n  export const COLLAPSE_ALL = Command.toDefaultLocalizedCommand({\r\n    id: 'navigator.collapse.all',\r\n    category: CommonCommands.FILE_CATEGORY,\r\n    label: 'Collapse Folders in Explorer',\r\n    iconClass: codicon('collapse-all')\r\n  });\r\n  export const ADD_ROOT_FOLDER: Command = {\r\n    id: 'navigator.addRootFolder'\r\n  };\r\n  export const FOCUS = Command.toDefaultLocalizedCommand({\r\n    id: 'workbench.files.action.focusFilesExplorer',\r\n    category: CommonCommands.FILE_CATEGORY,\r\n    label: 'Focus on Files Explorer'\r\n  });\r\n  export const COPY_RELATIVE_FILE_PATH = Command.toDefaultLocalizedCommand({\r\n    id: 'navigator.copyRelativeFilePath',\r\n    label: 'Copy Relative Path'\r\n  });\r\n  export const OPEN = Command.toDefaultLocalizedCommand({\r\n    id: 'navigator.open',\r\n    category: CommonCommands.FILE_CATEGORY,\r\n    label: 'Open'\r\n  });\r\n}\r\n\r\n/**\r\n * Navigator `More Actions...` toolbar item groups.\r\n * Used in order to group items present in the toolbar.\r\n */\r\nexport namespace NavigatorMoreToolbarGroups {\r\n  export const NEW_OPEN = '1_navigator_new_open';\r\n  export const TOOLS = '2_navigator_tools';\r\n  export const WORKSPACE = '3_navigator_workspace';\r\n}\r\n\r\nexport const NAVIGATOR_CONTEXT_MENU: MenuPath = ['navigator-context-menu'];\r\n\r\n/**\r\n * Navigator context menu default groups should be aligned\r\n * with VS Code default groups: https://code.visualstudio.com/api/references/contribution-points#contributes.menus\r\n */\r\nexport namespace NavigatorContextMenu {\r\n  export const NAVIGATION = [...NAVIGATOR_CONTEXT_MENU, 'navigation'];\r\n  /** @deprecated use NAVIGATION */\r\n  export const OPEN = NAVIGATION;\r\n  /** @deprecated use NAVIGATION */\r\n  export const NEW = NAVIGATION;\r\n\r\n  export const WORKSPACE = [...NAVIGATOR_CONTEXT_MENU, '2_workspace'];\r\n\r\n  export const COMPARE = [...NAVIGATOR_CONTEXT_MENU, '3_compare'];\r\n  /** @deprecated use COMPARE */\r\n  export const DIFF = COMPARE;\r\n\r\n  export const SEARCH = [...NAVIGATOR_CONTEXT_MENU, '4_search'];\r\n  export const CLIPBOARD = [...NAVIGATOR_CONTEXT_MENU, '5_cutcopypaste'];\r\n\r\n  export const SERIAL = [...NAVIGATOR_CONTEXT_MENU, '6_webserial'];\r\n\r\n  export const MODIFICATION = [...NAVIGATOR_CONTEXT_MENU, '7_modification'];\r\n  /** @deprecated use MODIFICATION */\r\n  export const MOVE = MODIFICATION;\r\n  /** @deprecated use MODIFICATION */\r\n  export const ACTIONS = MODIFICATION;\r\n\r\n  export const OPEN_WITH = [...NAVIGATION, 'open_with'];\r\n}\r\n\r\nexport const FILE_NAVIGATOR_TOGGLE_COMMAND_ID = 'fileNavigator:toggle';\r\n\r\n@injectable()\r\nexport class FileNavigatorContribution extends AbstractViewContribution<FileNavigatorWidget> implements FrontendApplicationContribution, TabBarToolbarContribution, CommandContribution, MenuContribution {\r\n\r\n  @inject(NavigatorContextKeyService)\r\n  protected readonly contextKeyService: NavigatorContextKeyService;\r\n\r\n  @inject(CommandRegistry)\r\n  protected readonly commandRegistry: CommandRegistry;\r\n\r\n  @inject(TabBarToolbarRegistry)\r\n  protected readonly tabbarToolbarRegistry: TabBarToolbarRegistry;\r\n\r\n  @inject(MenuModelRegistry)\r\n  protected readonly menuRegistry: MenuModelRegistry;\r\n\r\n  @inject(WorkspaceCommandContribution)\r\n  protected readonly workspaceCommandContribution: WorkspaceCommandContribution;\r\n  private readonly toDisposeAddRemoveFolderActions = new DisposableCollection();\r\n\r\n  constructor(\r\n      @inject(FileNavigatorPreferences) protected readonly fileNavigatorPreferences: FileNavigatorPreferences,\r\n      @inject(WorkspaceService) protected readonly workspaceService: WorkspaceService,\r\n      @inject(WorkspacePreferences) protected readonly workspacePreferences: WorkspacePreferences,\r\n  ) {\r\n    super({\r\n      viewContainerId: EXPLORER_VIEW_CONTAINER_ID,\r\n      widgetId: FILE_NAVIGATOR_ID,\r\n      widgetName: EXPLORER_VIEW_CONTAINER_TITLE_OPTIONS.label,\r\n      defaultWidgetOptions: {\r\n        area: 'left',\r\n        rank: 100\r\n      },\r\n      toggleCommandId: FILE_NAVIGATOR_TOGGLE_COMMAND_ID,\r\n      toggleKeybinding: 'ctrlcmd+shift+e'\r\n    });\r\n  }\r\n\r\n  async onStart(app: FrontendApplication): Promise<void> {\r\n    this.workspacePreferences.ready.then(() => {\r\n      this.updateAddRemoveFolderActions(this.menuRegistry);\r\n      this.workspacePreferences.onPreferenceChanged(change => {\r\n        if (change.preferenceName === 'workspace.supportMultiRootWorkspace') {\r\n          this.updateAddRemoveFolderActions(this.menuRegistry);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Register commands to the `More Actions...` navigator toolbar item.\r\n   */\r\n  public registerMoreToolbarItem = (item: Mutable<TabBarToolbarItem>) => {\r\n    const commandId = item.command;\r\n    const id = 'navigator.tabbar.toolbar.' + commandId;\r\n    const command = this.commandRegistry.getCommand(commandId);\r\n    this.commandRegistry.registerCommand({id, iconClass: command && command.iconClass}, {\r\n      execute: (w, ...args) => w instanceof FileNavigatorWidget\r\n          && this.commandRegistry.executeCommand(commandId, ...args),\r\n      isEnabled: (w, ...args) => w instanceof FileNavigatorWidget\r\n          && this.commandRegistry.isEnabled(commandId, ...args),\r\n      isVisible: (w, ...args) => w instanceof FileNavigatorWidget\r\n          && this.commandRegistry.isVisible(commandId, ...args),\r\n      isToggled: (w, ...args) => w instanceof FileNavigatorWidget\r\n          && this.commandRegistry.isToggled(commandId, ...args),\r\n    });\r\n    item.command = id;\r\n    this.tabbarToolbarRegistry.registerItem(item);\r\n  };\r\n\r\n  /**\r\n   * Reveals and selects node in the file navigator to which given widget is related.\r\n   * Does nothing if given widget undefined or doesn't have related resource.\r\n   *\r\n   * @param widget widget file resource of which should be revealed and selected\r\n   */\r\n  async selectWidgetFileNode(widget: Widget | undefined): Promise<void> {\r\n    if (Navigatable.is(widget)) {\r\n      const resourceUri = widget.getResourceUri();\r\n      if (resourceUri) {\r\n        const {model} = await this.widget;\r\n        const node = await model.revealFile(resourceUri);\r\n        if (SelectableTreeNode.is(node)) {\r\n          model.selectNode(node);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async initializeLayout(app: FrontendApplication): Promise<void> {\r\n    console.log('open view')\r\n    await this.openView();\r\n  }\r\n\r\n  registerCommands(registry: CommandRegistry) {\r\n    super.registerCommands(registry);\r\n    registry.registerCommand(FileNavigatorCommands.FOCUS, {\r\n      execute: () => this.openView({activate: true})\r\n    });\r\n    // registry.registerCommand(FileNavigatorCommands.ADD_ROOT_FOLDER, {\r\n    //     execute: (...args) => registry.executeCommand(WorkspaceCommands.ADD_FOLDER.id, args),\r\n    // });\r\n    registry.registerCommand(FileNavigatorCommands.REFRESH_NAVIGATOR, {\r\n      execute: widget => this.withWidget(widget, () => this.refreshWorkspace()),\r\n      isEnabled: widget => this.withWidget(widget, () => this.workspaceService.opened),\r\n      isVisible: widget => this.withWidget(widget, () => this.workspaceService.opened),\r\n    });\r\n  }\r\n\r\n  async registerToolbarItems(toolbarRegistry: TabBarToolbarRegistry): Promise<void> {\r\n    toolbarRegistry.registerItem({\r\n      id: FileNavigatorCommands.REFRESH_NAVIGATOR.id,\r\n      command: FileNavigatorCommands.REFRESH_NAVIGATOR.id,\r\n      tooltip: nls.localizeByDefault('Refresh Explorer'),\r\n      priority: 0,\r\n    });\r\n    // this.registerMoreToolbarItem({\r\n    //     id: WorkspaceCommands.ADD_FOLDER.id,\r\n    //     command: WorkspaceCommands.ADD_FOLDER.id,\r\n    //     tooltip: WorkspaceCommands.ADD_FOLDER.label,\r\n    //     group: NavigatorMoreToolbarGroups.WORKSPACE,\r\n    // });\r\n  }\r\n\r\n  registerKeybindings(registry: KeybindingRegistry): void {\r\n    super.registerKeybindings(registry);\r\n    registry.registerKeybinding({\r\n      command: FileNavigatorCommands.REVEAL_IN_NAVIGATOR.id,\r\n      keybinding: 'alt+r'\r\n    });\r\n\r\n    registry.registerKeybinding({\r\n      command: WorkspaceCommands.FILE_DELETE.id,\r\n      keybinding: isOSX ? 'cmd+backspace' : 'del',\r\n      context: NavigatorKeybindingContexts.navigatorActive\r\n    });\r\n\r\n    registry.registerKeybinding({\r\n      command: WorkspaceCommands.FILE_RENAME.id,\r\n      keybinding: 'f2',\r\n      context: NavigatorKeybindingContexts.navigatorActive\r\n    });\r\n\r\n    registry.registerKeybinding({\r\n      command: FileNavigatorCommands.TOGGLE_HIDDEN_FILES.id,\r\n      keybinding: 'ctrlcmd+i',\r\n      context: NavigatorKeybindingContexts.navigatorActive\r\n    });\r\n\r\n    registry.registerKeybinding({\r\n      command: FileNavigatorCommands.COPY_RELATIVE_FILE_PATH.id,\r\n      keybinding: isWindows ? 'ctrl+k ctrl+shift+c' : 'ctrlcmd+shift+alt+c',\r\n      when: '!editorFocus'\r\n    });\r\n  }\r\n\r\n  registerMenus(registry: MenuModelRegistry) {\r\n    super.registerMenus(registry);\r\n    // registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\r\n    //     commandId: FileNavigatorCommands.REVEAL_IN_NAVIGATOR.id,\r\n    //     label: FileNavigatorCommands.REVEAL_IN_NAVIGATOR.label,\r\n    //     order: '5'\r\n    // });\r\n\r\n    registry.registerMenuAction(NavigatorContextMenu.NAVIGATION, {\r\n      commandId: FileNavigatorCommands.OPEN.id,\r\n      label: FileNavigatorCommands.OPEN.label\r\n    });\r\n    registry.registerSubmenu(NavigatorContextMenu.OPEN_WITH, nls.localizeByDefault('Open With...'));\r\n    // this.openerService.getOpeners().then(openers => {\r\n    //     for (const opener of openers) {\r\n    //         const openWithCommand = WorkspaceCommands.FILE_OPEN_WITH(opener);\r\n    //         registry.registerMenuAction(NavigatorContextMenu.OPEN_WITH, {\r\n    //             commandId: openWithCommand.id,\r\n    //             label: opener.label,\r\n    //             icon: opener.iconClass\r\n    //         });\r\n    //     }\r\n    // });\r\n\r\n    // registry.registerMenuAction([CONTEXT_MENU_PATH, CUT_MENU_GROUP], {\r\n    //     commandId: Commands.FILE_CUT\r\n    // });\r\n\r\n    registry.registerMenuAction(NavigatorContextMenu.CLIPBOARD, {\r\n      commandId: CommonCommands.COPY.id,\r\n      order: 'a'\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.CLIPBOARD, {\r\n      commandId: CommonCommands.PASTE.id,\r\n      order: 'b'\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.CLIPBOARD, {\r\n      commandId: CommonCommands.COPY_PATH.id,\r\n      order: 'c'\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.CLIPBOARD, {\r\n      commandId: FileNavigatorCommands.COPY_RELATIVE_FILE_PATH.id,\r\n      label: FileNavigatorCommands.COPY_RELATIVE_FILE_PATH.label,\r\n      order: 'd'\r\n    });\r\n    // registry.registerMenuAction(NavigatorContextMenu.CLIPBOARD, {\r\n    //     commandId: FileDownloadCommands.COPY_DOWNLOAD_LINK.id,\r\n    //     order: 'z'\r\n    // });\r\n\r\n    registry.registerMenuAction(NavigatorContextMenu.MODIFICATION, {\r\n      commandId: WorkspaceCommands.FILE_RENAME.id\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.MODIFICATION, {\r\n      commandId: WorkspaceCommands.FILE_DELETE.id\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.MODIFICATION, {\r\n      commandId: WorkspaceCommands.FILE_DUPLICATE.id\r\n    });\r\n\r\n    const downloadUploadMenu = [...NAVIGATOR_CONTEXT_MENU, '6_downloadupload'];\r\n    registry.registerMenuAction(downloadUploadMenu, {\r\n      commandId: FileSystemCommands.UPLOAD.id,\r\n      order: 'a'\r\n    });\r\n    registry.registerMenuAction(downloadUploadMenu, {\r\n      commandId: FileDownloadCommands.DOWNLOAD.id,\r\n      order: 'b'\r\n    });\r\n\r\n    const fileSubMenuPath = [...NavigatorContextMenu.NAVIGATION, 'new-file'];\r\n    registry.registerSubmenu(fileSubMenuPath, nls.localize('New File', '新建文件'), {\r\n      order: '0'\r\n    });\r\n    registry.registerMenuAction(fileSubMenuPath, {\r\n      commandId: WorkspaceCommands.NEW_FILE.id,\r\n      order: 'a',\r\n    });\r\n\r\n    registry.registerMenuAction(NavigatorContextMenu.NAVIGATION, {\r\n      commandId: WorkspaceCommands.NEW_FOLDER.id\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.COMPARE, {\r\n      commandId: WorkspaceCommands.FILE_COMPARE.id\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.MODIFICATION, {\r\n      commandId: FileNavigatorCommands.COLLAPSE_ALL.id,\r\n      label: nls.localizeByDefault('Collapse All'),\r\n      order: 'z2'\r\n    });\r\n\r\n    registry.registerMenuAction(NavigatorContextMenu.COMPARE, {\r\n      commandId: NavigatorDiffCommands.COMPARE_FIRST.id,\r\n      order: 'za'\r\n    });\r\n    registry.registerMenuAction(NavigatorContextMenu.COMPARE, {\r\n      commandId: NavigatorDiffCommands.COMPARE_SECOND.id,\r\n      order: 'zb'\r\n    });\r\n\r\n    // Open Editors Widget Menu Items\r\n    registry.registerMenuAction(OpenEditorsContextMenu.CLIPBOARD, {\r\n      commandId: CommonCommands.COPY_PATH.id,\r\n      order: 'a'\r\n    });\r\n    registry.registerMenuAction(OpenEditorsContextMenu.CLIPBOARD, {\r\n      commandId: FileNavigatorCommands.COPY_RELATIVE_FILE_PATH.id,\r\n      order: 'b'\r\n    });\r\n    registry.registerMenuAction(OpenEditorsContextMenu.SAVE, {\r\n      commandId: CommonCommands.SAVE.id,\r\n      order: 'a'\r\n    });\r\n\r\n    registry.registerMenuAction(OpenEditorsContextMenu.COMPARE, {\r\n      commandId: NavigatorDiffCommands.COMPARE_FIRST.id,\r\n      order: 'a'\r\n    });\r\n    registry.registerMenuAction(OpenEditorsContextMenu.COMPARE, {\r\n      commandId: NavigatorDiffCommands.COMPARE_SECOND.id,\r\n      order: 'b'\r\n    });\r\n\r\n    registry.registerMenuAction(OpenEditorsContextMenu.MODIFICATION, {\r\n      commandId: CommonCommands.CLOSE_TAB.id,\r\n      label: 'Close',\r\n      order: 'a'\r\n    });\r\n    registry.registerMenuAction(OpenEditorsContextMenu.MODIFICATION, {\r\n      commandId: CommonCommands.CLOSE_OTHER_TABS.id,\r\n      label: 'Close Others',\r\n      order: 'b'\r\n    });\r\n    registry.registerMenuAction(OpenEditorsContextMenu.MODIFICATION, {\r\n      commandId: CommonCommands.CLOSE_ALL_MAIN_TABS.id,\r\n      label: 'Close All',\r\n      order: 'c'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * force refresh workspace in navigator\r\n   */\r\n  async refreshWorkspace(): Promise<void> {\r\n    const {model} = await this.widget;\r\n    await model.refresh();\r\n  }\r\n\r\n  @postConstruct()\r\n  protected async init(): Promise<void> {\r\n    await this.fileNavigatorPreferences.ready;\r\n    this.shell.currentChanged.connect(() => this.onCurrentWidgetChangedHandler());\r\n\r\n    const updateFocusContextKeys = () => {\r\n      const hasFocus = this.shell.activeWidget instanceof FileNavigatorWidget;\r\n      this.contextKeyService.explorerViewletFocus.set(hasFocus);\r\n      this.contextKeyService.filesExplorerFocus.set(hasFocus);\r\n    };\r\n    updateFocusContextKeys();\r\n    this.shell.activeChanged.connect(updateFocusContextKeys);\r\n    this.workspaceCommandContribution.onDidCreateNewFile(async event => this.onDidCreateNewResource(event));\r\n    this.workspaceCommandContribution.onDidCreateNewFolder(async event => this.onDidCreateNewResource(event));\r\n  }\r\n\r\n  withWidget<T>(widget: Widget | undefined = this.tryGetWidget(), cb: (navigator: FileNavigatorWidget | OpenEditorsWidget) => T): T | false {\r\n    if ((widget instanceof FileNavigatorWidget && widget.id === FILE_NAVIGATOR_ID) || widget instanceof OpenEditorsWidget) {\r\n      return cb(widget);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  protected onCurrentWidgetChangedHandler(): void {\r\n    if (this.fileNavigatorPreferences['explorer.autoReveal']) {\r\n      this.selectWidgetFileNode(this.shell.currentWidget);\r\n    }\r\n  }\r\n\r\n  private async onDidCreateNewResource(event: DidCreateNewResourceEvent): Promise<void> {\r\n    const navigator = this.tryGetWidget();\r\n    if (!navigator || !navigator.isVisible) {\r\n      return;\r\n    }\r\n    const model: FileNavigatorModel = navigator.model;\r\n    const parent = await model.revealFile(event.parent);\r\n    if (DirNode.is(parent)) {\r\n      await model.refresh(parent);\r\n    }\r\n    const node = await model.revealFile(event.uri);\r\n    if (SelectableTreeNode.is(node)) {\r\n      model.selectNode(node);\r\n      if (DirNode.is(node)) {\r\n        this.openView({activate: true});\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateAddRemoveFolderActions(registry: MenuModelRegistry): void {\r\n    this.toDisposeAddRemoveFolderActions.dispose();\r\n    if (this.workspacePreferences['workspace.supportMultiRootWorkspace']) {\r\n      // this.toDisposeAddRemoveFolderActions.push(registry.registerMenuAction(NavigatorContextMenu.WORKSPACE, {\r\n      //     commandId: FileNavigatorCommands.ADD_ROOT_FOLDER.id,\r\n      //     label: WorkspaceCommands.ADD_FOLDER.label!\r\n      // }));\r\n      this.toDisposeAddRemoveFolderActions.push(registry.registerMenuAction(NavigatorContextMenu.WORKSPACE, {\r\n        commandId: WorkspaceCommands.REMOVE_FOLDER.id\r\n      }));\r\n    }\r\n  }\r\n}\r\n"]}