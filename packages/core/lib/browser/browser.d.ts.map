{"version":3,"sources":["browser/browser.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;kFAckF;AAQlF,eAAO,MAAM,IAAI,SAAsC,CAAC;AACxD,eAAO,MAAM,MAAM,SAAoC,CAAC;AACxD,eAAO,MAAM,UAAU,SAAiB,CAAC;AAEzC,eAAO,MAAM,OAAO,SAAoC,CAAC;AACzD,eAAO,MAAM,SAAS,SAAsC,CAAC;AAC7D,eAAO,MAAM,QAAQ,SAA0C,CAAC;AAChE,eAAO,MAAM,QAAQ,SAAqC,CAAC;AAC3D,eAAO,MAAM,QAAQ,SAA6E,CAAC;AACnG,eAAO,MAAM,MAAM,SAAmC,CAAC;AAEvD,eAAO,MAAM,QAAQ,SAAiD,CAAC;AAEvE,eAAO,MAAM,oBAAoB,SAAqD,CAAC;AAEvF;;;GAGG;AACH,wBAAgB,cAAc,CAAC,CAAC,GAAE,MAAU,GAAG,OAAO,CAAC,IAAI,CAAC,CAa3D;AAED;;;;GAIG;AACH,wBAAgB,iBAAiB,CAAC,KAAK,EAAE,MAAM,GAAG,IAAI,EAAE,YAAY,EAAE,MAAM,GAAG,MAAM,CAAC;AAgBtF;;;GAGG;AACH,wBAAgB,YAAY,CAAC,IAAI,EAAE,MAAM,GAAG,IAAI,EAAE,YAAY,EAAE,MAAM,GAAG,MAAM,CAAC;AA2ChF;;GAEG;AACH,wBAAgB,iBAAiB,CAAC,KAAK,EAAE,UAAU,GAAG,IAAI,CA+BzD","file":"../../src/browser/browser.d.ts","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nconst userAgent = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n\nexport const isIE = (userAgent.indexOf('Trident') >= 0);\nexport const isEdge = (userAgent.indexOf('Edge/') >= 0);\nexport const isEdgeOrIE = isIE || isEdge;\n\nexport const isOpera = (userAgent.indexOf('Opera') >= 0);\nexport const isFirefox = (userAgent.indexOf('Firefox') >= 0);\nexport const isWebKit = (userAgent.indexOf('AppleWebKit') >= 0);\nexport const isChrome = (userAgent.indexOf('Chrome') >= 0);\nexport const isSafari = (userAgent.indexOf('Chrome') === -1) && (userAgent.indexOf('Safari') >= 0);\nexport const isIPad = (userAgent.indexOf('iPad') >= 0);\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isNative = typeof (window as any).process !== 'undefined';\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isBasicWasmSupported = typeof (window as any).WebAssembly !== 'undefined';\n\n/**\n * Resolves after the next animation frame if no parameter is given,\n * or after the given number of animation frames.\n */\nexport function animationFrame(n: number = 1): Promise<void> {\n  return new Promise(resolve => {\n    function frameFunc(): void {\n      if (n <= 0) {\n        resolve();\n      } else {\n        n--;\n        requestAnimationFrame(frameFunc);\n      }\n    }\n\n    frameFunc();\n  });\n}\n\n/**\n * Parse a magnitude value (e.g. width, height, left, top) from a CSS attribute value.\n * Returns the given default value (or undefined) if the value cannot be determined,\n * e.g. because it is a relative value like `50%` or `auto`.\n */\nexport function parseCssMagnitude(value: string | null, defaultValue: number): number;\nexport function parseCssMagnitude(value: string | null, defaultValue?: number): number | undefined {\n  if (value) {\n    let parsed: number;\n    if (value.endsWith('px')) {\n      parsed = parseFloat(value.substring(0, value.length - 2));\n    } else {\n      parsed = parseFloat(value);\n    }\n    if (!isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return defaultValue;\n}\n\n/**\n * Parse the number of milliseconds from a CSS time value.\n * Returns the given default value (or undefined) if the value cannot be determined.\n */\nexport function parseCssTime(time: string | null, defaultValue: number): number;\nexport function parseCssTime(time: string | null, defaultValue?: number): number | undefined {\n  if (time) {\n    let parsed: number;\n    if (time.endsWith('ms')) {\n      parsed = parseFloat(time.substring(0, time.length - 2));\n    } else if (time.endsWith('s')) {\n      parsed = parseFloat(time.substring(0, time.length - 1)) * 1000;\n    } else {\n      parsed = parseFloat(time);\n    }\n    if (!isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return defaultValue;\n}\n\ninterface ElementScroll {\n  left: number\n  top: number\n  maxLeft: number\n  maxTop: number\n}\n\nfunction getMonacoEditorScroll(elem: HTMLElement): ElementScroll | undefined {\n  const linesContent = elem.querySelector('.lines-content') as HTMLElement;\n  const viewLines = elem.querySelector('.view-lines') as HTMLElement;\n  // eslint-disable-next-line no-null/no-null\n  if (linesContent === null || viewLines === null) {\n    return undefined;\n  }\n  const linesContentStyle = linesContent.style;\n  const elemStyle = elem.style;\n  const viewLinesStyle = viewLines.style;\n  return {\n    left: -parseCssMagnitude(linesContentStyle.left, 0),\n    top: -parseCssMagnitude(linesContentStyle.top, 0),\n    maxLeft: parseCssMagnitude(viewLinesStyle.width, 0) - parseCssMagnitude(elemStyle.width, 0),\n    maxTop: parseCssMagnitude(viewLinesStyle.height, 0) - parseCssMagnitude(elemStyle.height, 0)\n  };\n}\n\n/**\n * Prevent browser back/forward navigation of a mouse wheel event.\n */\nexport function preventNavigation(event: WheelEvent): void {\n  const {currentTarget, deltaX, deltaY} = event;\n  const absDeltaX = Math.abs(deltaX);\n  const absDeltaY = Math.abs(deltaY);\n  let elem = event.target as Element | null;\n\n  while (elem && elem !== currentTarget) {\n    let scroll: ElementScroll | undefined;\n    if (elem.classList.contains('monaco-scrollable-element')) {\n      scroll = getMonacoEditorScroll(elem as HTMLElement);\n    } else {\n      scroll = {\n        left: elem.scrollLeft,\n        top: elem.scrollTop,\n        maxLeft: elem.scrollWidth - elem.clientWidth,\n        maxTop: elem.scrollHeight - elem.clientHeight\n      };\n    }\n    if (scroll) {\n      const scrollH = scroll.maxLeft > 0 && (deltaX < 0 && scroll.left > 0 || deltaX > 0 && scroll.left < scroll.maxLeft);\n      const scrollV = scroll.maxTop > 0 && (deltaY < 0 && scroll.top > 0 || deltaY > 0 && scroll.top < scroll.maxTop);\n      if (scrollH && scrollV || scrollH && absDeltaX > absDeltaY || scrollV && absDeltaY > absDeltaX) {\n        // The event is consumed by the scrollable child element\n        return;\n      }\n    }\n    elem = elem.parentElement;\n  }\n\n  event.preventDefault();\n  event.stopPropagation();\n}\n"]}