{"version":3,"sources":["browser/quick-input/quick-view-service.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;kFAckF;;;;;;;;AAElF,OAAO,EAAC,MAAM,EAAE,UAAU,EAAC,MAAM,WAAW,CAAC;AAC7C,OAAO,EAAoB,UAAU,EAAC,MAAM,cAAc,CAAC;AAC3D,OAAO,EAAC,iBAAiB,EAAC,MAAM,wBAAwB,CAAC;AACzD,OAAO,EAA+C,mBAAmB,EAAC,MAAM,gBAAgB,CAAC;AACjG,OAAO,EAAC,WAAW,EAA4B,MAAM,iCAAiC,CAAC;AASvF,IAAa,gBAAgB,wBAA7B,MAAa,gBAAgB;IAC3B,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC;IAEL,KAAK,GAA0C,EAAE,CAAC;IAElD,mBAAmB,CAAsB;IAEzC,iBAAiB,CAAoB;IAChD,gBAAgB,GAAG,IAAI,GAAG,EAAsB,CAAC;IAEzD,YAAY,CAAC,IAAmB;QAC9B,MAAM,aAAa,GAAG;YACpB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE;YAC1B,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB,CAAC;QACF,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAM,CAAC,aAAa,CAAC,CAAC,CAAC,KAAM,CAAC,CAAC,CAAC;QAE5D,OAAO,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE;YAC5B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;YAChD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBAChB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aAC7B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,KAAa;QACpB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IAED,QAAQ,CAAC,KAAa;QACpB,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACtC,CAAC;IAED,2BAA2B;QACzB,IAAI,CAAC,mBAAmB,CAAC,2BAA2B,CAAC;YACnD,WAAW,EAAE,GAAG,EAAE,CAAC,IAAI;YACvB,MAAM,EAAE,kBAAgB,CAAC,MAAM;YAC/B,WAAW,EAAE,EAAE;YACf,WAAW,EAAE,CAAC,EAAC,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,EAAC,CAAC;SAC9D,CAAC,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,MAAc,EAAE,KAAwB;QAC/C,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CACnC,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACpE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAC3C,CAAC;QACF,OAAO,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACpC,CAAC;CACF,CAAA;AA9CC;IADC,MAAM,CAAC,mBAAmB,CAAC;6DACgC;AAE5D;IADC,MAAM,CAAC,iBAAiB,CAAC;2DAC8B;AAP7C,gBAAgB;IAD5B,UAAU,EAAE;GACA,gBAAgB,CAmD5B;SAnDY,gBAAgB","file":"../../../src/browser/quick-input/quick-view-service.js","sourcesContent":["/********************************************************************************\n * Copyright (c) 2021 SAP SE or an SAP affiliate company and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {inject, injectable} from 'inversify';\nimport {CancellationToken, Disposable} from '../../common';\nimport {ContextKeyService} from '../context-key-service';\nimport {QuickAccessContribution, QuickAccessProvider, QuickAccessRegistry} from './quick-access';\nimport {filterItems, QuickPickItem, QuickPicks} from '../../common/quick-pick-service';\n\nexport interface QuickViewItem {\n  readonly label: string;\n  readonly when?: string;\n  readonly open: () => void;\n}\n\n@injectable()\nexport class QuickViewService implements QuickAccessContribution, QuickAccessProvider {\n  static PREFIX = 'view ';\n\n  protected readonly items: (QuickPickItem & { when?: string })[] = [];\n  @inject(QuickAccessRegistry)\n  protected readonly quickAccessRegistry: QuickAccessRegistry;\n  @inject(ContextKeyService)\n  protected readonly contextKexService: ContextKeyService;\n  private hiddenItemLabels = new Set<string | undefined>();\n\n  registerItem(item: QuickViewItem): Disposable {\n    const quickOpenItem = {\n      label: item.label,\n      execute: () => item.open(),\n      when: item.when\n    };\n    this.items.push(quickOpenItem);\n    this.items.sort((a, b) => a.label!.localeCompare(b.label!));\n\n    return Disposable.create(() => {\n      const index = this.items.indexOf(quickOpenItem);\n      if (index !== -1) {\n        this.items.splice(index, 1);\n      }\n    });\n  }\n\n  hideItem(label: string): void {\n    this.hiddenItemLabels.add(label);\n  }\n\n  showItem(label: string): void {\n    this.hiddenItemLabels.delete(label);\n  }\n\n  registerQuickAccessProvider(): void {\n    this.quickAccessRegistry.registerQuickAccessProvider({\n      getInstance: () => this,\n      prefix: QuickViewService.PREFIX,\n      placeholder: '',\n      helpEntries: [{description: 'Open View', needsEditor: false}]\n    });\n  }\n\n  getPicks(filter: string, token: CancellationToken): QuickPicks {\n    const items = this.items.filter(item =>\n        (item.when === undefined || this.contextKexService.match(item.when)) &&\n        (!this.hiddenItemLabels.has(item.label))\n    );\n    return filterItems(items, filter);\n  }\n}\n"]}