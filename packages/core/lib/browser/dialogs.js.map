{"version":3,"sources":["browser/dialogs.ts"],"names":[],"mappings":"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","file":"../../src/browser/dialogs.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {inject, injectable} from 'inversify';\nimport {CancellationTokenSource, Disposable, MaybePromise} from '../common';\nimport {Key} from './keyboard/keys';\nimport {addKeyListener, BaseWidget, codiconArray, Message, Widget} from './widgets';\nimport {FrontendApplicationContribution} from './frontend-application';\nimport {nls} from '../common/nls';\n\n@injectable()\nexport class DialogProps {\n  readonly title: string;\n  /**\n   * Determines the maximum width of the dialog in pixels.\n   * Default value is undefined, which would result in the css property 'max-width: none' being applied to the dialog.\n   */\n  maxWidth?: number;\n  /**\n   * Determine the word wrapping behavior for content in the dialog.\n   * - `normal`: breaks words at allowed break points.\n   * - `break-word`: breaks otherwise unbreakable words.\n   * - `initial`: sets the property to it's default value.\n   * - `inherit`: inherit this property from it's parent element.\n   * Default value is undefined, which would result in the css property 'word-wrap' not being applied to the dialog.\n   */\n  wordWrap?: 'normal' | 'break-word' | 'initial' | 'inherit';\n}\n\nexport type DialogMode = 'open' | 'preview';\n\nexport type DialogError = string | boolean | {\n  message: string\n  result: boolean\n};\nexport namespace DialogError {\n  export function getResult(error: DialogError): boolean {\n    if (typeof error === 'string') {\n      return !error.length;\n    }\n    if (typeof error === 'boolean') {\n      return error;\n    }\n    return error.result;\n  }\n\n  export function getMessage(error: DialogError): string {\n    if (typeof error === 'string') {\n      return error;\n    }\n    if (typeof error === 'boolean') {\n      return '';\n    }\n    return error.message;\n  }\n}\n\nexport namespace Dialog {\n  export const YES = nls.localizeByDefault('Yes');\n  export const NO = nls.localizeByDefault('No');\n  export const OK = nls.localizeByDefault('OK');\n  export const CANCEL = nls.localizeByDefault('Cancel');\n}\n\n@injectable()\nexport class DialogOverlayService implements FrontendApplicationContribution {\n\n  protected static INSTANCE: DialogOverlayService;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  protected readonly dialogs: AbstractDialog<any>[] = [];\n\n  constructor() {\n    addKeyListener(document.body, Key.ENTER, e => this.handleEnter(e));\n    addKeyListener(document.body, Key.ESCAPE, e => this.handleEscape(e));\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  protected get currentDialog(): AbstractDialog<any> | undefined {\n    return this.dialogs[0];\n  }\n\n  static get(): DialogOverlayService {\n    return DialogOverlayService.INSTANCE;\n  }\n\n  initialize(): void {\n    DialogOverlayService.INSTANCE = this;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  push(dialog: AbstractDialog<any>): Disposable {\n    this.dialogs.unshift(dialog);\n    return Disposable.create(() => {\n      const index = this.dialogs.indexOf(dialog);\n      if (index > -1) {\n        this.dialogs.splice(index, 1);\n      }\n    });\n  }\n\n  protected handleEscape(event: KeyboardEvent): boolean | void {\n    const dialog = this.currentDialog;\n    if (dialog) {\n      return dialog['handleEscape'](event);\n    }\n    return false;\n  }\n\n  protected handleEnter(event: KeyboardEvent): boolean | void {\n    const dialog = this.currentDialog;\n    if (dialog) {\n      return dialog['handleEnter'](event);\n    }\n    return false;\n  }\n\n}\n\n@injectable()\nexport abstract class AbstractDialog<T> extends BaseWidget {\n\n  protected readonly titleNode: HTMLDivElement;\n  protected readonly contentNode: HTMLDivElement;\n  protected readonly closeCrossNode: HTMLElement;\n  protected readonly controlPanel: HTMLDivElement;\n  protected readonly errorMessageNode: HTMLDivElement;\n\n  protected resolve: undefined | ((value: T | undefined) => void);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  protected reject: undefined | ((reason: any) => void);\n\n  protected closeButton: HTMLButtonElement | undefined;\n  protected acceptButton: HTMLButtonElement | undefined;\n\n  protected activeElement: HTMLElement | undefined;\n  protected validateCancellationSource = new CancellationTokenSource();\n  protected acceptCancellationSource = new CancellationTokenSource();\n\n  constructor(\n      @inject(DialogProps) protected readonly props: DialogProps\n  ) {\n    super();\n    this.id = 'tart-dialog-shell';\n    this.addClass('dialogOverlay');\n    this.toDispose.push(Disposable.create(() => {\n      if (this.reject) {\n        Widget.detach(this);\n      }\n    }));\n    const container = document.createElement('div');\n    container.classList.add('dialogBlock');\n    if (props.maxWidth === undefined) {\n      container.setAttribute('style', 'max-width: none');\n    } else {\n      container.setAttribute('style', `max-width: ${props.maxWidth}px; min-width: 0px`);\n    }\n    this.node.appendChild(container);\n\n    const titleContentNode = document.createElement('div');\n    titleContentNode.classList.add('dialogTitle');\n    container.appendChild(titleContentNode);\n\n    this.titleNode = document.createElement('div');\n    this.titleNode.textContent = props.title;\n    titleContentNode.appendChild(this.titleNode);\n\n    this.closeCrossNode = document.createElement('i');\n    this.closeCrossNode.classList.add(...codiconArray('close'));\n    this.closeCrossNode.classList.add('closeButton');\n    titleContentNode.appendChild(this.closeCrossNode);\n\n    this.contentNode = document.createElement('div');\n    this.contentNode.classList.add('dialogContent');\n    if (props.wordWrap !== undefined) {\n      this.contentNode.setAttribute('style', `word-wrap: ${props.wordWrap}`);\n    }\n    container.appendChild(this.contentNode);\n\n    this.controlPanel = document.createElement('div');\n    this.controlPanel.classList.add('dialogControl');\n    container.appendChild(this.controlPanel);\n\n    this.errorMessageNode = document.createElement('div');\n    this.errorMessageNode.classList.add('error');\n    this.errorMessageNode.setAttribute('style', 'flex: 2');\n    this.controlPanel.appendChild(this.errorMessageNode);\n\n    this.update();\n  }\n\n  abstract get value(): T;\n\n  open(): Promise<T | undefined> {\n    if (this.resolve) {\n      return Promise.reject(new Error('The dialog is already opened.'));\n    }\n    this.activeElement = window.document.activeElement as HTMLElement;\n    return new Promise<T | undefined>((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n      this.toDisposeOnDetach.push(Disposable.create(() => {\n        this.resolve = undefined;\n        this.reject = undefined;\n      }));\n\n      Widget.attach(this, document.body);\n      this.activate();\n    });\n  }\n\n  close(): void {\n    if (this.resolve) {\n      if (this.activeElement) {\n        this.activeElement.focus({preventScroll: true});\n      }\n      this.resolve(undefined);\n    }\n    this.activeElement = undefined;\n    super.close();\n  }\n\n  protected appendCloseButton(text: string = Dialog.CANCEL): HTMLButtonElement {\n    this.closeButton = this.createButton(text);\n    this.controlPanel.appendChild(this.closeButton);\n    this.closeButton.classList.add('secondary');\n    return this.closeButton;\n  }\n\n  protected appendAcceptButton(text: string = Dialog.OK): HTMLButtonElement {\n    this.acceptButton = this.createButton(text);\n    this.controlPanel.appendChild(this.acceptButton);\n    this.acceptButton.classList.add('main');\n    return this.acceptButton;\n  }\n\n  protected createButton(text: string): HTMLButtonElement {\n    const button = document.createElement('button');\n    button.classList.add('tart-button');\n    button.textContent = text;\n    return button;\n  }\n\n  protected onAfterAttach(msg: Message): void {\n    super.onAfterAttach(msg);\n    if (this.closeButton) {\n      this.addCloseAction(this.closeButton, 'click');\n    }\n    if (this.acceptButton) {\n      this.addAcceptAction(this.acceptButton, 'click');\n    }\n    this.addCloseAction(this.closeCrossNode, 'click');\n    // TODO: use DI always to create dialog instances\n    this.toDisposeOnDetach.push(DialogOverlayService.get().push(this));\n  }\n\n  protected handleEscape(event: KeyboardEvent): boolean | void {\n    this.close();\n  }\n\n  protected handleEnter(event: KeyboardEvent): boolean | void {\n    if (event.target instanceof HTMLTextAreaElement) {\n      return false;\n    }\n    this.accept();\n  }\n\n  protected onActivateRequest(msg: Message): void {\n    super.onActivateRequest(msg);\n    if (this.acceptButton) {\n      this.acceptButton.focus();\n    }\n  }\n\n  protected onUpdateRequest(msg: Message): void {\n    super.onUpdateRequest(msg);\n    this.validate();\n  }\n\n  protected async validate(): Promise<void> {\n    if (!this.resolve) {\n      return;\n    }\n    this.validateCancellationSource.cancel();\n    this.validateCancellationSource = new CancellationTokenSource();\n    const token = this.validateCancellationSource.token;\n    const value = this.value;\n    const error = await this.isValid(value, 'preview');\n    if (token.isCancellationRequested) {\n      return;\n    }\n    this.setErrorMessage(error);\n  }\n\n  protected async accept(): Promise<void> {\n    if (!this.resolve) {\n      return;\n    }\n    this.acceptCancellationSource.cancel();\n    this.acceptCancellationSource = new CancellationTokenSource();\n    const token = this.acceptCancellationSource.token;\n    const value = this.value;\n    const error = await this.isValid(value, 'open');\n    if (token.isCancellationRequested) {\n      return;\n    }\n    if (!DialogError.getResult(error)) {\n      this.setErrorMessage(error);\n    } else {\n      this.resolve(value);\n      Widget.detach(this);\n    }\n  }\n\n  /**\n   * Return a string of zero-length or true if valid.\n   */\n  protected isValid(value: T, mode: DialogMode): MaybePromise<DialogError> {\n    return '';\n  }\n\n  protected setErrorMessage(error: DialogError): void {\n    if (this.acceptButton) {\n      this.acceptButton.disabled = !DialogError.getResult(error);\n    }\n    this.errorMessageNode.innerText = DialogError.getMessage(error);\n  }\n\n  protected addCloseAction<K extends keyof HTMLElementEventMap>(element: HTMLElement, ...additionalEventTypes: K[]): void {\n    this.addKeyListener(element, Key.ENTER, () => this.close(), ...additionalEventTypes);\n  }\n\n  protected addAcceptAction<K extends keyof HTMLElementEventMap>(element: HTMLElement, ...additionalEventTypes: K[]): void {\n    this.addKeyListener(element, Key.ENTER, () => this.accept(), ...additionalEventTypes);\n  }\n\n}\n\n@injectable()\nexport class ConfirmDialogProps extends DialogProps {\n  readonly msg: string | HTMLElement;\n  readonly cancel?: string;\n  readonly ok?: string;\n}\n\nexport class ConfirmDialog extends AbstractDialog<boolean> {\n\n  protected confirmed = true;\n\n  constructor(\n      @inject(ConfirmDialogProps) protected readonly props: ConfirmDialogProps\n  ) {\n    super(props);\n\n    this.contentNode.appendChild(this.createMessageNode(this.props.msg));\n    this.appendCloseButton(props.cancel);\n    this.appendAcceptButton(props.ok);\n  }\n\n  get value(): boolean {\n    return this.confirmed;\n  }\n\n  protected onCloseRequest(msg: Message): void {\n    super.onCloseRequest(msg);\n    this.confirmed = false;\n    this.accept();\n  }\n\n  protected createMessageNode(msg: string | HTMLElement): HTMLElement {\n    if (typeof msg === 'string') {\n      const messageNode = document.createElement('div');\n      messageNode.textContent = msg;\n      return messageNode;\n    }\n    return msg;\n  }\n\n}\n\n@injectable()\nexport class SingleTextInputDialogProps extends DialogProps {\n  readonly confirmButtonLabel?: string;\n  readonly initialValue?: string;\n  readonly initialSelectionRange?: {\n    start: number\n    end: number\n    direction?: 'forward' | 'backward' | 'none'\n  };\n  readonly validate?: (input: string, mode: DialogMode) => MaybePromise<DialogError>;\n}\n\nexport class SingleTextInputDialog extends AbstractDialog<string> {\n\n  protected readonly inputField: HTMLInputElement;\n\n  constructor(\n      @inject(SingleTextInputDialogProps) protected readonly props: SingleTextInputDialogProps\n  ) {\n    super(props);\n\n    this.inputField = document.createElement('input');\n    this.inputField.type = 'text';\n    this.inputField.className = 'tart-input';\n    this.inputField.spellcheck = false;\n    this.inputField.setAttribute('style', 'flex: 0;');\n    this.inputField.value = props.initialValue || '';\n    if (props.initialSelectionRange) {\n      this.inputField.setSelectionRange(\n          props.initialSelectionRange.start,\n          props.initialSelectionRange.end,\n          props.initialSelectionRange.direction\n      );\n    } else {\n      this.inputField.select();\n    }\n    this.contentNode.appendChild(this.inputField);\n\n    this.appendAcceptButton(props.confirmButtonLabel);\n  }\n\n  get value(): string {\n    return this.inputField.value;\n  }\n\n  protected isValid(value: string, mode: DialogMode): MaybePromise<DialogError> {\n    if (this.props.validate) {\n      return this.props.validate(value, mode);\n    }\n    return super.isValid(value, mode);\n  }\n\n  protected onAfterAttach(msg: Message): void {\n    super.onAfterAttach(msg);\n    this.addUpdateListener(this.inputField, 'input');\n  }\n\n  protected onActivateRequest(msg: Message): void {\n    this.inputField.focus();\n  }\n\n  protected handleEnter(event: KeyboardEvent): boolean | void {\n    if (event.target instanceof HTMLInputElement) {\n      return super.handleEnter(event);\n    }\n    return false;\n  }\n\n}\n\n@injectable()\nexport class MessageDialogProps extends DialogProps {\n  readonly msg: string | HTMLElement;\n}\n\n\nexport class MessageDialog extends AbstractDialog<void> {\n\n  constructor(\n      @inject(MessageDialogProps) protected readonly props: MessageDialogProps\n  ) {\n    super(props);\n\n    this.contentNode.appendChild(this.createMessageNode(this.props.msg))\n    this.closeCrossNode.remove();\n  }\n\n  get value(): void {\n    return;\n  }\n\n  protected createMessageNode(msg: string | HTMLElement): HTMLElement {\n    if (typeof msg === 'string') {\n      const messageNode = document.createElement('div');\n      messageNode.textContent = msg;\n      return messageNode;\n    }\n    return msg;\n  }\n}\n"]}