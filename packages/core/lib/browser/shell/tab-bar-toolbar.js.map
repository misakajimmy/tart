{"version":3,"sources":["browser/shell/tab-bar-toolbar.tsx"],"names":[],"mappings":"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","file":"../../../src/browser/shell/tab-bar-toolbar.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {debounce} from 'lodash';\nimport * as React from 'react';\nimport {inject, injectable, named} from 'inversify';\nimport {ACTION_ITEM, codicon, ReactWidget, Widget} from '../widgets';\nimport {LabelIcon, LabelParser} from '../label-parser';\nimport {ContributionProvider} from '../../common/contribution-provider';\nimport {FrontendApplicationContribution} from '../frontend-application';\nimport {CommandRegistry} from '../../common/command';\nimport {Disposable, DisposableCollection} from '../../common/disposable';\nimport {ContextKeyService} from '../context-key-service';\nimport {Emitter, Event} from '../../common';\nimport {Anchor, ContextMenuRenderer} from '../context-menu-renderer';\nimport {MenuModelRegistry} from '../../common/menu';\n\n/**\n * Clients should implement this interface if they want to contribute to the tab-bar toolbar.\n */\nexport const TabBarToolbarContribution = Symbol('TabBarToolbarContribution');\n\n/**\n * Representation of a tabbar toolbar contribution.\n */\nexport interface TabBarToolbarContribution {\n  /**\n   * Registers toolbar items.\n   * @param registry the tabbar toolbar registry.\n   */\n  registerToolbarItems(registry: TabBarToolbarRegistry): void;\n}\n\nexport interface TabBarDelegator extends Widget {\n  getTabBarDelegate(): Widget | undefined;\n}\n\nexport namespace TabBarDelegator {\n  export const is = (candidate?: Widget): candidate is TabBarDelegator => {\n    if (candidate) {\n      const asDelegator = candidate as TabBarDelegator;\n      return typeof asDelegator.getTabBarDelegate === 'function';\n    }\n    return false;\n  };\n}\n\n/**\n * Representation of an item in the tab\n */\nexport interface TabBarToolbarItem {\n\n  /**\n   * The unique ID of the toolbar item.\n   */\n  readonly id: string;\n\n  /**\n   * The command to execute.\n   */\n  readonly command: string;\n\n  /**\n   * Optional text of the item.\n   *\n   * Shamelessly copied and reused from `status-bar`:\n   *\n   * More details about the available `fontawesome` icons and CSS class names can be hound [here](http://fontawesome.io/icons/).\n   * To set a text with icon use the following pattern in text string:\n   * ```typescript\n   * $(fontawesomeClassName)\n   * ```\n   *\n   * To use animated icons use the following pattern:\n   * ```typescript\n   * $(fontawesomeClassName~typeOfAnimation)\n   * ````\n   * The type of animation can be either `spin` or `pulse`.\n   * Look [here](http://fontawesome.io/examples/#animated) for more information to animated icons.\n   */\n  readonly text?: string;\n\n  /**\n   * Priority among the items. Can be negative. The smaller the number the left-most the item will be placed in the toolbar. It is `0` by default.\n   */\n  readonly priority?: number;\n\n  /**\n   * Optional group for the item. Default `navigation`.\n   * `navigation` group will be inlined, while all the others will be within the `...` dropdown.\n   * A group in format `submenu_group_1/submenu 1/.../submenu_group_n/ submenu n/item_group` means that the item will be located in a submenu(s) of the `...` dropdown.\n   * The submenu's title is named by the submenu section name, e.g. `group/<submenu name>/subgroup`.\n   */\n  readonly group?: string;\n\n  /**\n   * Optional tooltip for the item.\n   */\n  readonly tooltip?: string;\n\n  /**\n   * Optional icon for the item.\n   */\n  readonly icon?: string | (() => string);\n\n  /**\n   * https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts\n   */\n  readonly when?: string;\n\n  /**\n   * When defined, the container tool-bar will be updated if this event is fired.\n   *\n   * Note: currently, each item of the container toolbar will be re-rendered if any of the items have changed.\n   */\n  readonly onDidChange?: Event<void>;\n\n}\n\n/**\n * Tab-bar toolbar item backed by a `React.ReactNode`.\n * Unlike the `TabBarToolbarItem`, this item is not connected to the command service.\n */\nexport interface ReactTabBarToolbarItem {\n  readonly id: string;\n  readonly onDidChange?: Event<void>;\n  readonly when?: string;\n\n  // For the rest, see `TabBarToolbarItem`.\n  // Ordering and grouping.\n  readonly priority?: number;\n  /**\n   * Optional group for the item. Default `navigation`. Always inlined.\n   */\n  readonly group?: string;\n\n  render(widget?: Widget): React.ReactNode;\n\n  // For conditional visibility.\n  isVisible?(widget: Widget): boolean;\n}\n\nexport namespace TabBarToolbarItem {\n\n  /**\n   * Compares the items by `priority` in ascending. Undefined priorities will be treated as `0`.\n   */\n  export const PRIORITY_COMPARATOR = (left: TabBarToolbarItem, right: TabBarToolbarItem) => {\n    // The navigation group is special as it will always be sorted to the top/beginning of a menu.\n    const compareGroup = (leftGroup: string | undefined = 'navigation', rightGroup: string | undefined = 'navigation') => {\n      if (leftGroup === 'navigation') {\n        return rightGroup === 'navigation' ? 0 : -1;\n      }\n      if (rightGroup === 'navigation') {\n        return leftGroup === 'navigation' ? 0 : 1;\n      }\n      return leftGroup.localeCompare(rightGroup);\n    };\n    const result = compareGroup(left.group, right.group);\n    if (result !== 0) {\n      return result;\n    }\n    return (left.priority || 0) - (right.priority || 0);\n  };\n\n  export function is(arg: Object | undefined): arg is TabBarToolbarItem {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return !!arg && 'command' in arg && typeof (arg as any).command === 'string';\n  }\n\n}\n\n/**\n * Main, shared registry for tab-bar toolbar items.\n */\n@injectable()\nexport class TabBarToolbarRegistry implements FrontendApplicationContribution {\n\n  protected items: Map<string, TabBarToolbarItem | ReactTabBarToolbarItem> = new Map();\n\n  @inject(CommandRegistry)\n  protected readonly commandRegistry: CommandRegistry;\n\n  @inject(ContextKeyService)\n  protected readonly contextKeyService: ContextKeyService;\n\n  @inject(ContributionProvider)\n  @named(TabBarToolbarContribution)\n  protected readonly contributionProvider: ContributionProvider<TabBarToolbarContribution>;\n\n  protected readonly onDidChangeEmitter = new Emitter<void>();\n  readonly onDidChange: Event<void> = this.onDidChangeEmitter.event;\n  // debounce in order to avoid to fire more than once in the same tick\n  protected fireOnDidChange = debounce(() => this.onDidChangeEmitter.fire(undefined), 0);\n\n  onStart(): void {\n    console.log('TabBarToolbarRegistry Start');\n    const contributions = this.contributionProvider.getContributions();\n    for (const contribution of contributions) {\n      contribution.registerToolbarItems(this);\n    }\n  }\n\n  /**\n   * Registers the given item. Throws an error, if the corresponding command cannot be found or an item has been already registered for the desired command.\n   *\n   * @param item the item to register.\n   */\n  registerItem(item: TabBarToolbarItem | ReactTabBarToolbarItem): Disposable {\n    const {id} = item;\n    if (this.items.has(id)) {\n      throw new Error(`A toolbar item is already registered with the '${id}' ID.`);\n    }\n    this.items.set(id, item);\n    this.fireOnDidChange();\n    const toDispose = new DisposableCollection(\n        Disposable.create(() => {\n          this.fireOnDidChange();\n        }),\n        Disposable.create(() => this.items.delete(id))\n    );\n    if (item.onDidChange) {\n      toDispose.push(item.onDidChange(() => this.fireOnDidChange()));\n    }\n    return toDispose;\n  }\n\n  /**\n   * Returns an array of tab-bar toolbar items which are visible when the `widget` argument is the current one.\n   *\n   * By default returns with all items where the command is enabled and `item.isVisible` is `true`.\n   */\n  visibleItems(widget: Widget): Array<TabBarToolbarItem | ReactTabBarToolbarItem> {\n    if (widget.isDisposed) {\n      return [];\n    }\n    const result = [];\n    for (const item of this.items.values()) {\n      const visible = TabBarToolbarItem.is(item)\n          ? this.commandRegistry.isVisible(item.command, widget)\n          : (!item.isVisible || item.isVisible(widget));\n      if (visible && (!item.when || this.contextKeyService.match(item.when, widget.node))) {\n        result.push(item);\n      }\n    }\n    return result;\n  }\n\n  unregisterItem(itemOrId: TabBarToolbarItem | ReactTabBarToolbarItem | string): void {\n    const id = typeof itemOrId === 'string' ? itemOrId : itemOrId.id;\n    if (this.items.delete(id)) {\n      this.fireOnDidChange();\n    }\n  }\n\n}\n\n/**\n * Factory for instantiating tab-bar toolbars.\n */\nexport const TabBarToolbarFactory = Symbol('TabBarToolbarFactory');\n\nexport interface TabBarToolbarFactory {\n  (): TabBarToolbar;\n}\n\n/**\n * Tab-bar toolbar widget representing the active [tab-bar toolbar items](TabBarToolbarItem).\n */\n@injectable()\nexport class TabBarToolbar extends ReactWidget {\n\n  protected current: Widget | undefined;\n  protected inline = new Map<string, TabBarToolbarItem | ReactTabBarToolbarItem>();\n  protected more = new Map<string, TabBarToolbarItem>();\n\n  protected readonly onExecuteCommandEmitter = new Emitter<void>();\n  readonly onExecuteCommand = this.onExecuteCommandEmitter.event;\n\n  @inject(CommandRegistry)\n  protected readonly commands: CommandRegistry;\n\n  @inject(LabelParser)\n  protected readonly labelParser: LabelParser;\n\n  @inject(MenuModelRegistry)\n  protected readonly menus: MenuModelRegistry;\n\n  @inject(ContextMenuRenderer)\n  protected readonly contextMenuRenderer: ContextMenuRenderer;\n\n  @inject(TabBarToolbarRegistry)\n  protected readonly toolbarRegistry: TabBarToolbarRegistry;\n  protected readonly toDisposeOnSetCurrent = new DisposableCollection();\n\n  constructor() {\n    super();\n    this.addClass(TabBarToolbar.Styles.TAB_BAR_TOOLBAR);\n    this.hide();\n  }\n\n  updateItems(items: Array<TabBarToolbarItem | ReactTabBarToolbarItem>, current: Widget | undefined): void {\n    this.inline.clear();\n    this.more.clear();\n    for (const item of items.sort(TabBarToolbarItem.PRIORITY_COMPARATOR).reverse()) {\n      if ('render' in item || item.group === undefined || item.group === 'navigation') {\n        this.inline.set(item.id, item);\n      } else {\n        this.more.set(item.id, item);\n      }\n    }\n    this.setCurrent(current);\n    if (!items.length) {\n      this.hide();\n    }\n    this.onRender.push(Disposable.create(() => {\n      if (items.length) {\n        this.show();\n      }\n    }));\n    this.update();\n  }\n\n  updateTarget(current?: Widget): void {\n    const operativeWidget = TabBarDelegator.is(current) ? current.getTabBarDelegate() : current;\n    const items = operativeWidget ? this.toolbarRegistry.visibleItems(operativeWidget) : [];\n    this.updateItems(items, operativeWidget);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  renderMoreContextMenu(anchor: Anchor): any {\n    const menuPath = ['TAB_BAR_TOOLBAR_CONTEXT_MENU'];\n    const toDisposeOnHide = new DisposableCollection();\n    this.addClass('menu-open');\n    toDisposeOnHide.push(Disposable.create(() => this.removeClass('menu-open')));\n    for (const item of this.more.values()) {\n      // Register a submenu for the item, if the group is in format `<submenu group>/<submenu name>/.../<item group>`\n      if (item.group?.includes('/')) {\n        const split = item.group.split('/');\n        const paths: string[] = [];\n        for (let i = 0; i < split.length - 1; i += 2) {\n          paths.push(split[i], split[i + 1]);\n          // TODO order is missing, items sorting will be alphabetic\n          toDisposeOnHide.push(this.menus.registerSubmenu([...menuPath, ...paths], split[i + 1]));\n        }\n      }\n      // TODO order is missing, items sorting will be alphabetic\n      toDisposeOnHide.push(this.menus.registerMenuAction([...menuPath, ...item.group!.split('/')], {\n        label: item.tooltip,\n        commandId: item.command,\n        when: item.when\n      }));\n    }\n    return this.contextMenuRenderer.render({\n      menuPath,\n      args: [this.current],\n      anchor,\n      onHide: () => toDisposeOnHide.dispose()\n    });\n  }\n\n  shouldHandleMouseEvent(event: MouseEvent): boolean {\n    return event.target instanceof Element && this.node.contains(event.target);\n  }\n\n  protected setCurrent(current: Widget | undefined): void {\n    this.toDisposeOnSetCurrent.dispose();\n    this.toDispose.push(this.toDisposeOnSetCurrent);\n    this.current = current;\n    if (current) {\n      const resetCurrent = () => {\n        this.setCurrent(undefined);\n        this.update();\n      };\n      current.disposed.connect(resetCurrent);\n      this.toDisposeOnSetCurrent.push(Disposable.create(() =>\n          current.disposed.disconnect(resetCurrent)\n      ));\n    }\n  }\n\n  protected render(): React.ReactNode {\n    return <React.Fragment>\n      {this.renderMore()}\n      {[...this.inline.values()].map(item => TabBarToolbarItem.is(item) ? this.renderItem(item) : item.render(this.current))}\n    </React.Fragment>;\n  }\n\n  protected renderItem(item: TabBarToolbarItem): React.ReactNode {\n    let innerText = '';\n    const classNames = [];\n    if (item.text) {\n      for (const labelPart of this.labelParser.parse(item.text)) {\n        if (typeof labelPart !== 'string' && LabelIcon.is(labelPart)) {\n          const className = `fa fa-${labelPart.name}${labelPart.animation ? ' fa-' + labelPart.animation : ''}`;\n          classNames.push(...className.split(' '));\n        } else {\n          innerText = labelPart;\n        }\n      }\n    }\n    const command = this.commands.getCommand(item.command);\n    let iconClass = (typeof item.icon === 'function' && item.icon()) || item.icon as string || (command && command.iconClass);\n    if (iconClass) {\n      iconClass += ` ${ACTION_ITEM}`;\n      classNames.push(iconClass);\n    }\n    const tooltip = item.tooltip || (command && command.label);\n    const toolbarItemClassNames = this.getToolbarItemClassNames(command?.id);\n    return <div key={item.id}\n                className={toolbarItemClassNames}\n                onMouseDown={this.onMouseDownEvent}\n                onMouseUp={this.onMouseUpEvent}\n                onMouseOut={this.onMouseUpEvent}>\n      <div id={item.id} className={classNames.join(' ')}\n           onClick={this.executeCommand}\n           title={tooltip}>{innerText}\n      </div>\n    </div>;\n  }\n\n  protected getToolbarItemClassNames(commandId: string | undefined): string {\n    const classNames = [TabBarToolbar.Styles.TAB_BAR_TOOLBAR_ITEM];\n    if (commandId) {\n      if (this.commandIsEnabled(commandId)) {\n        classNames.push('enabled');\n      }\n      if (this.commandIsToggled(commandId)) {\n        classNames.push('toggled');\n      }\n    }\n    return classNames.join(' ');\n  }\n\n  protected renderMore(): React.ReactNode {\n    return !!this.more.size &&\n        <div key='__more__' className={TabBarToolbar.Styles.TAB_BAR_TOOLBAR_ITEM + ' enabled'}>\n            <div id='__more__' className={codicon('ellipsis', true)} onClick={this.showMoreContextMenu}\n                 title={'More Actions...'}/>\n        </div>;\n  }\n\n  protected showMoreContextMenu = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    this.renderMoreContextMenu(event.nativeEvent);\n  };\n\n  protected commandIsEnabled(command: string): boolean {\n    return this.commands.isEnabled(command, this.current);\n  }\n\n  protected commandIsToggled(command: string): boolean {\n    return this.commands.isToggled(command, this.current);\n  }\n\n  protected executeCommand = (e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const item = this.inline.get(e.currentTarget.id);\n    if (TabBarToolbarItem.is(item)) {\n      this.commands.executeCommand(item.command, this.current).then(() => {\n        this.onExecuteCommandEmitter.fire()\n      });\n    }\n    this.update();\n  };\n\n  protected onMouseDownEvent = (e: React.MouseEvent<HTMLElement>) => {\n    if (e.button === 0) {\n      e.currentTarget.classList.add('active');\n    }\n  };\n\n  protected onMouseUpEvent = (e: React.MouseEvent<HTMLElement>) => {\n    e.currentTarget.classList.remove('active');\n  };\n\n}\n\nexport namespace TabBarToolbar {\n\n  export namespace Styles {\n\n    export const TAB_BAR_TOOLBAR = 'p-TabBar-toolbar';\n    export const TAB_BAR_TOOLBAR_ITEM = 'item';\n\n  }\n\n}\n"]}