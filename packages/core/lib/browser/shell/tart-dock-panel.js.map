{"version":3,"sources":["browser/shell/tart-dock-panel.ts"],"names":[],"mappings":"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","file":"../../../src/browser/shell/tart-dock-panel.js","sourcesContent":["/**\n * This specialization of DockPanel adds various events that are used for implementing the\n * side panels of the application shell.\n */\nimport {DockLayout, DockPanel, TabBar, Title, Widget} from '@lumino/widgets';\nimport {Disposable, DisposableCollection, Emitter} from '../../common';\nimport {UnsafeWidgetUtilities} from '../widgets';\nimport {Signal} from '@lumino/signaling';\nimport {ArrayExt, find, toArray} from '@lumino/algorithm';\n\nexport const MAXIMIZED_CLASS = 'tart-maximized';\n\nexport const MAIN_AREA_ID = 'tart-main-content-panel';\nexport const BOTTOM_AREA_ID = 'tart-bottom-content-panel';\n\nexport class TartDockPanel extends DockPanel {\n  /**\n   * Emitted when a widget is added to the panel.\n   */\n  readonly widgetAdded = new Signal<this, Widget>(this);\n  /**\n   * Emitted when a widget is activated by calling `activateWidget`.\n   */\n  readonly widgetActivated = new Signal<this, Widget>(this);\n  /**\n   * Emitted when a widget is removed from the panel.\n   */\n  readonly widgetRemoved = new Signal<this, Widget>(this);\n\n  protected readonly onDidToggleMaximizedEmitter = new Emitter<Widget>();\n  readonly onDidToggleMaximized = this.onDidToggleMaximizedEmitter.event;\n  protected readonly toDisposeOnMarkAsCurrent = new DisposableCollection();\n  protected readonly toDisposeOnToggleMaximized = new DisposableCollection();\n  protected maximizedElement: HTMLElement | undefined;\n\n  constructor(\n      options?: DockPanel.IOptions,\n  ) {\n    super(options);\n    this['_onCurrentChanged'] = (sender: TabBar<Widget>, args: TabBar.ICurrentChangedArgs<Widget>) => {\n      this.markAsCurrent(args.currentTitle || undefined);\n      super['_onCurrentChanged'](sender, args);\n    };\n    this['_onTabActivateRequested'] = (sender: TabBar<Widget>, args: TabBar.ITabActivateRequestedArgs<Widget>) => {\n      this.markAsCurrent(args.title);\n      super['_onTabActivateRequested'](sender, args);\n    };\n  }\n\n  get currentTabBar(): TabBar<Widget> | undefined {\n    return this._currentTitle && this.findTabBar(this._currentTitle);\n  }\n\n  protected _currentTitle: Title<Widget> | undefined;\n\n  get currentTitle(): Title<Widget> | undefined {\n    return this._currentTitle;\n  }\n\n  findTabBar(title: Title<Widget>): TabBar<Widget> | undefined {\n    return find(this.tabBars(), bar => ArrayExt.firstIndexOf(bar.titles, title) > -1);\n  }\n\n  previousTabBarWidget(widget: Widget): Widget | undefined {\n    const current = this.findTabBar(widget.title);\n    const previous = current && this.previousTabBarInPanel(current);\n    return previous && previous.currentTitle && previous.currentTitle.owner || undefined;\n  }\n\n  previousTabBarInPanel(tabBar: TabBar<Widget>): TabBar<Widget> | undefined {\n    const tabBars = toArray(this.tabBars());\n    const index = tabBars.indexOf(tabBar);\n    if (index !== -1) {\n      return tabBars[index - 1];\n    }\n    return undefined;\n  }\n\n  nextTabBarWidget(widget: Widget): Widget | undefined {\n    const current = this.findTabBar(widget.title);\n    const next = current && this.nextTabBarInPanel(current);\n    return next && next.currentTitle && next.currentTitle.owner || undefined;\n  }\n\n  nextTabBarInPanel(tabBar: TabBar<Widget>): TabBar<Widget> | undefined {\n    const tabBars = toArray(this.tabBars());\n    const index = tabBars.indexOf(tabBar);\n    if (index !== -1) {\n      return tabBars[index + 1];\n    }\n    return undefined;\n  }\n\n  addWidget(widget: Widget, options?: DockPanel.IAddOptions): void {\n    if (this.mode === 'single-document' && widget.parent === this) {\n      return;\n    }\n    super.addWidget(widget, options);\n    this.widgetAdded.emit(widget);\n  }\n\n  markAsCurrent(title: Title<Widget> | undefined): void {\n    this.toDisposeOnMarkAsCurrent.dispose();\n    this._currentTitle = title;\n    if (title) {\n      const resetCurrent = () => this.markAsCurrent(undefined);\n      title.owner.disposed.connect(resetCurrent);\n      this.toDisposeOnMarkAsCurrent.push(Disposable.create(() =>\n          title.owner.disposed.disconnect(resetCurrent)\n      ));\n    }\n  }\n\n  toggleMaximized(): void {\n    const areaContainer = this.node.parentElement;\n    if (!areaContainer) {\n      return;\n    }\n    const maximizedElement = this.getMaximizedElement();\n    if (areaContainer === maximizedElement) {\n      this.toDisposeOnToggleMaximized.dispose();\n      return;\n    }\n    if (this.isAttached) {\n      UnsafeWidgetUtilities.detach(this);\n    }\n    maximizedElement.style.display = 'block';\n    this.addClass(MAXIMIZED_CLASS);\n    UnsafeWidgetUtilities.attach(this, maximizedElement);\n    this.fit();\n    this.onDidToggleMaximizedEmitter.fire(this);\n    this.toDisposeOnToggleMaximized.push(Disposable.create(() => {\n      maximizedElement.style.display = 'none';\n      this.removeClass(MAXIMIZED_CLASS);\n      this.onDidToggleMaximizedEmitter.fire(this);\n      if (this.isAttached) {\n        UnsafeWidgetUtilities.detach(this);\n      }\n      UnsafeWidgetUtilities.attach(this, areaContainer);\n      this.fit();\n    }));\n\n    const layout = this.layout;\n    if (layout instanceof DockLayout) {\n      const onResize = layout['onResize'];\n      layout['onResize'] = () => onResize.bind(layout)(Widget.ResizeMessage.UnknownSize);\n      this.toDisposeOnToggleMaximized.push(Disposable.create(() => layout['onResize'] = onResize));\n    }\n\n    const removedListener = () => {\n      if (!this.widgets().next()) {\n        this.toDisposeOnToggleMaximized.dispose();\n      }\n    };\n    this.widgetRemoved.connect(removedListener);\n    this.toDisposeOnToggleMaximized.push(Disposable.create(() => this.widgetRemoved.disconnect(removedListener)));\n  }\n\n  protected onChildRemoved(msg: Widget.ChildMessage): void {\n    super.onChildRemoved(msg);\n    this.widgetRemoved.emit(msg.child);\n  }\n\n  protected getMaximizedElement(): HTMLElement {\n    if (!this.maximizedElement) {\n      this.maximizedElement = document.createElement('div');\n      this.maximizedElement.style.display = 'none';\n      document.body.appendChild(this.maximizedElement);\n    }\n    return this.maximizedElement;\n  }\n}\n"]}