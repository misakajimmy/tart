{"version":3,"sources":["browser/view-container.ts"],"names":[],"mappings":"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","file":"../../src/browser/view-container.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2018-2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {inject, injectable, interfaces, postConstruct} from 'inversify';\nimport {ArrayExt, every, find, IIterator, map, some, toArray} from '@lumino/algorithm';\nimport {\n  addEventListener,\n  addKeyListener,\n  BaseWidget,\n  CODICON_TREE_ITEM_CLASSES,\n  COLLAPSED_CLASS,\n  EXPANSION_TOGGLE_CLASS,\n  LayoutItem,\n  Message,\n  MessageLoop,\n  PanelLayout,\n  SplitLayout,\n  SplitPanel,\n  UnsafeWidgetUtilities,\n  waitForRevealed,\n  Widget\n} from './widgets';\nimport {Emitter, Event as CommonEvent, isEmpty} from '../common';\nimport {Disposable, DisposableCollection} from '../common/disposable';\nimport {CommandRegistry} from '../common/command';\nimport {MenuAction, MenuModelRegistry, MenuPath} from '../common/menu';\nimport {\n  ApplicationShell,\n  SIDE_PANEL_TOOLBAR_CONTEXT_MENU,\n  SplitPositionHandler,\n  SplitPositionOptions,\n  StatefulWidget\n} from './shell';\nimport {BOTTOM_AREA_ID, MAIN_AREA_ID} from './shell/tart-dock-panel';\nimport {FrontendApplicationStateService} from './frontend-application-state';\nimport {Anchor, ContextMenuRenderer} from './context-menu-renderer';\nimport {parseCssMagnitude} from './browser';\nimport {WidgetManager} from './widget-manager';\nimport {\n  TabBarDelegator,\n  TabBarToolbar,\n  TabBarToolbarFactory,\n  TabBarToolbarItem,\n  TabBarToolbarRegistry\n} from './shell/tab-bar-toolbar';\nimport {Key} from './keys';\nimport {ProgressBarFactory} from './progress-bar-factory';\nimport {TabBarDecoratorService} from './shell/tab-bar-decorator';\nimport {Drag, IDragEvent} from '@lumino/dragdrop';\nimport {ElementExt} from '@lumino/domutils';\nimport {MimeData} from '@lumino/coreutils';\nimport {DockPanel} from '@lumino/widgets';\n\nexport interface ViewContainerTitleOptions {\n  label: string;\n  caption?: string;\n  iconClass?: string;\n  closeable?: boolean;\n}\n\n@injectable()\nexport class ViewContainerIdentifier {\n  id: string;\n  progressLocationId?: string;\n}\n\nexport interface DescriptionWidget {\n  description: string;\n  onDidChangeDescription: Emitter<void>;\n}\n\nexport namespace DescriptionWidget {\n  export function is(arg: Object | undefined): arg is DescriptionWidget {\n    return !!arg && typeof arg === 'object' && 'onDidChangeDescription' in arg;\n  }\n}\n\n/**\n * A view container holds an arbitrary number of widgets inside a split panel.\n * Each widget is wrapped in a _part_ that displays the widget title and toolbar\n * and allows to collapse / expand the widget content.\n */\n@injectable()\nexport class ViewContainer extends BaseWidget implements StatefulWidget, ApplicationShell.TrackableWidgetProvider, TabBarDelegator {\n\n  /**\n   * Disable dragging parts from/to this view container.\n   */\n  disableDNDBetweenContainers = false;\n  @inject(ViewContainerIdentifier)\n  readonly options: ViewContainerIdentifier;\n  toDisposeOnDragEnd = new DisposableCollection();\n  protected panel: SplitPanel;\n  protected currentPart: ViewContainerPart | undefined;\n  @inject(FrontendApplicationStateService)\n  protected readonly applicationStateService: FrontendApplicationStateService;\n  @inject(ContextMenuRenderer)\n  protected readonly contextMenuRenderer: ContextMenuRenderer;\n  @inject(CommandRegistry)\n  protected readonly commandRegistry: CommandRegistry;\n  @inject(MenuModelRegistry)\n  protected readonly menuRegistry: MenuModelRegistry;\n  @inject(WidgetManager)\n  protected readonly widgetManager: WidgetManager;\n  @inject(SplitPositionHandler)\n  protected readonly splitPositionHandler: SplitPositionHandler;\n  @inject(TabBarToolbarRegistry)\n  protected readonly toolbarRegistry: TabBarToolbarRegistry;\n  @inject(TabBarToolbarFactory)\n  protected readonly toolbarFactory: TabBarToolbarFactory;\n  protected readonly onDidChangeTrackableWidgetsEmitter = new Emitter<Widget[]>();\n  readonly onDidChangeTrackableWidgets = this.onDidChangeTrackableWidgetsEmitter.event;\n  @inject(ProgressBarFactory)\n  protected readonly progressBarFactory: ProgressBarFactory;\n  @inject(ApplicationShell)\n  protected readonly shell: ApplicationShell;\n  @inject(TabBarDecoratorService)\n  protected readonly decoratorService: TabBarDecoratorService;\n  protected readonly toDisposeOnCurrentPart = new DisposableCollection();\n  protected titleOptions: ViewContainerTitleOptions | undefined;\n  protected readonly toDisposeOnUpdateTitle = new DisposableCollection();\n  protected _tabBarDelegate: Widget = this;\n  protected readonly toRemoveWidgets = new Map<string, DisposableCollection>();\n  protected lastVisibleState: ViewContainer.State | undefined;\n\n  get containerLayout(): ViewContainerLayout {\n    const layout = this.panel.layout;\n    if (layout instanceof ViewContainerLayout) {\n      return layout;\n    }\n    throw new Error('view container is disposed');\n  }\n\n  protected get orientation(): SplitLayout.Orientation {\n    return ViewContainer.getOrientation(this.node);\n  }\n\n  protected get enableAnimation(): boolean {\n    return this.applicationStateService.state === 'ready';\n  }\n\n  protected get contextMenuPath(): MenuPath {\n    return [`${this.id}-context-menu`];\n  }\n\n  protected get globalHideCommandId(): string {\n    return `${this.id}:toggle-visibility`;\n  }\n\n  setTitleOptions(titleOptions: ViewContainerTitleOptions | undefined): void {\n    this.titleOptions = titleOptions;\n    this.updateTitle();\n  }\n\n  updateTabBarDelegate(): void {\n    const visibleParts = this.getParts().filter(part => !part.isHidden);\n    if (visibleParts.length === 1) {\n      this._tabBarDelegate = visibleParts[0].wrapped;\n    } else {\n      this._tabBarDelegate = this;\n    }\n  }\n\n  getTabBarDelegate(): Widget | undefined {\n    return this._tabBarDelegate;\n  }\n\n  addWidget(widget: Widget, options?: ViewContainer.Factory.WidgetOptions, originalContainerId?: string, originalContainerTitle?: ViewContainerTitleOptions): Disposable {\n    const existing = this.toRemoveWidgets.get(widget.id);\n    if (existing) {\n      return existing;\n    }\n    const partId = this.createPartId(widget);\n    const newPart = this.createPart(widget, partId, originalContainerId || this.id, originalContainerTitle || this.titleOptions, options);\n    return this.attachNewPart(newPart);\n  }\n\n  removeWidget(widget: Widget): boolean {\n    const disposable = this.toRemoveWidgets.get(widget.id);\n    if (disposable) {\n      disposable.dispose();\n      return true;\n    }\n    return false;\n  }\n\n  getParts(): ViewContainerPart[] {\n    return this.containerLayout.widget;\n  }\n\n  getPartFor(widget: Widget): ViewContainerPart | undefined {\n    return this.getParts().find(p => p.wrapped.id === widget.id);\n  }\n\n  storeState(): ViewContainer.State {\n    if (!this.isVisible && this.lastVisibleState) {\n      return this.lastVisibleState;\n    }\n    return this.doStoreState();\n  }\n\n  restoreState(state: ViewContainer.State): void {\n    this.lastVisibleState = state;\n    this.doRestoreState(state);\n  }\n\n  getTrackableWidgets(): Widget[] {\n    return this.getParts().map(w => w.wrapped);\n  }\n\n  activateWidget(id: string): Widget | undefined {\n    const part = this.revealPart(id);\n    if (!part) {\n      return undefined;\n    }\n    this.updateCurrentPart(part);\n    part.collapsed = false;\n    return part.wrapped;\n  }\n\n  revealWidget(id: string): Widget | undefined {\n    const part = this.revealPart(id);\n    return part && part.wrapped;\n  }\n\n  handleEvent(event: Event): void {\n    switch (event.type) {\n      case 'p-dragenter':\n        this.handleDragEnter(event as IDragEvent);\n        break;\n      case 'p-dragover':\n        this.handleDragOver(event as IDragEvent);\n        break;\n      case 'p-dragleave':\n        this.handleDragLeave(event as IDragEvent);\n        break;\n      case 'p-drop':\n        this.handleDrop(event as IDragEvent);\n        break;\n    }\n  }\n\n  handleDragEnter(event: IDragEvent): void {\n    if (event.mimeData.hasData('application/vnd.phosphor.view-container-factory')) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  handleDragOver(event: IDragEvent): void {\n    const factory = event.mimeData.getData('application/vnd.phosphor.view-container-factory');\n    const widget = factory && factory();\n    if (!(widget instanceof ViewContainerPart)) {\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n\n    const sameContainers = this.id === widget.currentViewContainerId;\n    const targetPart = ArrayExt.findFirstValue(this.getParts(), (p => ElementExt.hitTest(p.node, event.clientX, event.clientY)));\n    if (!targetPart && sameContainers) {\n      event.dropAction = 'none';\n      return;\n    }\n    if (targetPart) {\n      // add overlay class style to the `targetPart` node.\n      targetPart.node.classList.add('drop-target');\n      this.toDisposeOnDragEnd.push(Disposable.create(() => targetPart.node.classList.remove('drop-target')));\n    } else {\n      // show panel overlay.\n      const dockPanel = this.getDockPanel();\n      if (dockPanel) {\n        dockPanel.overlay.show({top: 0, bottom: 0, right: 0, left: 0});\n        this.toDisposeOnDragEnd.push(Disposable.create(() => dockPanel.overlay.hide(100)));\n      }\n    }\n\n    const isDraggingOutsideDisabled = this.disableDNDBetweenContainers || widget.viewContainer?.disableDNDBetweenContainers\n        || widget.options.disableDraggingToOtherContainers;\n    if (isDraggingOutsideDisabled && !sameContainers) {\n      const {target} = event;\n      if (target instanceof HTMLElement) {\n        target.classList.add('tart-cursor-no-drop');\n        this.toDisposeOnDragEnd.push(Disposable.create(() => {\n          target.classList.remove('tart-cursor-no-drop');\n        }));\n      }\n      event.dropAction = 'none';\n      return;\n    }\n\n\n    event.dropAction = event.proposedAction;\n  };\n\n  handleDragLeave(event: IDragEvent): void {\n    this.toDisposeOnDragEnd.dispose();\n    if (event.mimeData.hasData('application/vnd.phosphor.view-container-factory')) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  handleDrop(event: IDragEvent): void {\n    this.toDisposeOnDragEnd.dispose();\n    const factory = event.mimeData.getData('application/vnd.phosphor.view-container-factory');\n    const draggedPart = factory && factory();\n    if (!(draggedPart instanceof ViewContainerPart)) {\n      event.dropAction = 'none';\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    const parts = this.getParts();\n    const toIndex = ArrayExt.findFirstIndex(parts, part => ElementExt.hitTest(part.node, event.clientX, event.clientY));\n    if (draggedPart.currentViewContainerId !== this.id) {\n      this.attachNewPart(draggedPart, toIndex > -1 ? toIndex + 1 : toIndex);\n      draggedPart.onPartMoved(this);\n    } else {\n      this.moveBefore(draggedPart.id, parts[toIndex].id);\n    }\n    event.dropAction = event.proposedAction;\n  }\n\n  @postConstruct()\n  protected init(): void {\n    this.id = this.options.id;\n    this.addClass('tart-view-container');\n    const layout = new PanelLayout();\n    this.layout = layout;\n    this.panel = new SplitPanel({\n      layout: new ViewContainerLayout({\n        renderer: SplitPanel.defaultRenderer,\n        orientation: this.orientation,\n        spacing: 2,\n        headerSize: ViewContainerPart.HEADER_HEIGHT,\n        animationDuration: 200\n      }, this.splitPositionHandler)\n    });\n    this.panel.node.tabIndex = -1;\n    this.configureLayout(layout);\n\n    const {commandRegistry, menuRegistry, contextMenuRenderer} = this;\n    this.toDispose.pushAll([\n      addEventListener(this.node, 'contextmenu', event => {\n        if (event.button === 2 && every(this.containerLayout.iter(), part => !!part.isHidden)) {\n          event.stopPropagation();\n          event.preventDefault();\n          contextMenuRenderer.render({menuPath: this.contextMenuPath, anchor: event});\n        }\n      }),\n      commandRegistry.registerCommand({id: this.globalHideCommandId}, {\n        execute: (anchor: Anchor) => {\n          const toHide = this.findPartForAnchor(anchor);\n          if (toHide && toHide.canHide) {\n            toHide.hide();\n          }\n        },\n        isVisible: (anchor: Anchor) => {\n          const toHide = this.findPartForAnchor(anchor);\n          if (toHide) {\n            return toHide.canHide && !toHide.isHidden;\n          } else {\n            return some(this.containerLayout.iter(), part => !part.isHidden);\n          }\n        }\n      }),\n      menuRegistry.registerMenuAction([...this.contextMenuPath, '0_global'], {\n        commandId: this.globalHideCommandId,\n        label: 'Hide'\n      }),\n      this.onDidChangeTrackableWidgetsEmitter,\n      this.onDidChangeTrackableWidgets(() => this.decoratorService.fireDidChangeDecorations())\n    ]);\n    if (this.options.progressLocationId) {\n      this.toDispose.push(this.progressBarFactory({\n        container: this.node,\n        insertMode: 'prepend',\n        locationId: this.options.progressLocationId\n      }));\n    }\n  }\n\n  protected configureLayout(layout: PanelLayout): void {\n    layout.addWidget(this.panel);\n  }\n\n  protected updateCurrentPart(part?: ViewContainerPart): void {\n    if (part && this.getParts().indexOf(part) !== -1) {\n      this.currentPart = part;\n    }\n    if (this.currentPart && !this.currentPart.isDisposed) {\n      return;\n    }\n    const visibleParts = this.getParts().filter(p => !p.isHidden);\n    const expandedParts = visibleParts.filter(p => !p.collapsed);\n    this.currentPart = expandedParts[0] || visibleParts[0];\n  }\n\n  protected updateTitle(): void {\n    this.toDisposeOnUpdateTitle.dispose();\n    this.toDispose.push(this.toDisposeOnUpdateTitle);\n    this.updateTabBarDelegate();\n    let title = Object.assign({}, this.titleOptions);\n    if (isEmpty(title)) {\n      return;\n    }\n    const allParts = this.getParts();\n    const visibleParts = allParts.filter(part => !part.isHidden);\n    this.title.label = title.label;\n    // If there's only one visible part - inline it's title into the container title except in case the part\n    // isn't originally belongs to this container but there are other **original** hidden parts.\n    if (visibleParts.length === 1 && (visibleParts[0].originalContainerId === this.id || !this.findOriginalPart())) {\n      const part = visibleParts[0];\n      this.toDisposeOnUpdateTitle.push(part.onTitleChanged(() => this.updateTitle()));\n      const partLabel = part.wrapped.title.label;\n      // Change the container title if it contains only one part that originally belongs to another container.\n      if (allParts.length === 1 && part.originalContainerId !== this.id && !this.isCurrentTitle(part.originalContainerTitle)) {\n        title = Object.assign({}, part.originalContainerTitle);\n        this.setTitleOptions(title);\n        return;\n      }\n      if (partLabel) {\n        if (this.title.label && this.title.label !== partLabel) {\n          this.title.label += ': ' + partLabel;\n        } else {\n          this.title.label = partLabel;\n        }\n      }\n      part.collapsed = false;\n      part.hideTitle();\n    } else {\n      visibleParts.forEach(part => part.showTitle());\n      // If at least one part originally belongs to this container the title should return to its original value.\n      const originalPart = this.findOriginalPart();\n      if (originalPart && !this.isCurrentTitle(originalPart.originalContainerTitle)) {\n        title = Object.assign({}, originalPart.originalContainerTitle);\n        this.setTitleOptions(title);\n        return;\n      }\n    }\n    this.updateToolbarItems(allParts);\n    const caption = title?.caption || title?.label;\n    if (caption) {\n      this.title.caption = caption;\n      if (visibleParts.length === 1) {\n        const partCaption = visibleParts[0].wrapped.title.caption || visibleParts[0].wrapped.title.label;\n        if (partCaption) {\n          this.title.caption += ': ' + partCaption;\n        }\n      }\n    }\n    if (title.iconClass) {\n      this.title.iconClass = title.iconClass;\n    }\n    if (title.closeable !== undefined) {\n      this.title.closable = title.closeable;\n    }\n  }\n\n  protected updateToolbarItems(allParts: ViewContainerPart[]): void {\n    if (allParts.length > 1) {\n      const group = this.getToggleVisibilityGroupLabel();\n      for (const part of allParts) {\n        const existingId = this.toggleVisibilityCommandId(part);\n        const {caption, label, dataset: {visibilityCommandLabel}} = part.wrapped.title;\n        this.registerToolbarItem(existingId, {tooltip: visibilityCommandLabel || caption || label, group});\n      }\n    }\n  }\n\n  protected getToggleVisibilityGroupLabel(): string {\n    return 'view';\n  }\n\n  protected registerToolbarItem(commandId: string, options?: Partial<Omit<TabBarToolbarItem, 'id' | 'command'>>): void {\n    const newId = `${this.id}-tabbar-toolbar-${commandId}`;\n    const existingHandler = this.commandRegistry.getAllHandlers(commandId)[0];\n    const existingCommand = this.commandRegistry.getCommand(commandId);\n    if (existingHandler && existingCommand) {\n      this.toDisposeOnUpdateTitle.push(this.commandRegistry.registerCommand({...existingCommand, id: newId}, {\n        execute: (_widget, ...args) => this.commandRegistry.executeCommand(commandId, ...args),\n        isToggled: (_widget, ...args) => this.commandRegistry.isToggled(commandId, ...args),\n        isEnabled: (_widget, ...args) => this.commandRegistry.isEnabled(commandId, ...args),\n        isVisible: (widget, ...args) => widget === this.getTabBarDelegate() && this.commandRegistry.isVisible(commandId, ...args),\n      }));\n      this.toDisposeOnUpdateTitle.push(this.toolbarRegistry.registerItem({\n        ...options,\n        id: newId,\n        command: newId,\n      }));\n    }\n  }\n\n  protected findOriginalPart(): ViewContainerPart | undefined {\n    return this.getParts().find(part => part.originalContainerId === this.id);\n  }\n\n  protected isCurrentTitle(titleOptions: ViewContainerTitleOptions | undefined): boolean {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (!!titleOptions && !!this.titleOptions && Object.keys(titleOptions).every(key => (titleOptions as any)[key] === (this.titleOptions as any)[key]))\n        || (!titleOptions && !this.titleOptions);\n  }\n\n  protected findPartForAnchor(anchor: Anchor): ViewContainerPart | undefined {\n    const element = document.elementFromPoint(anchor.x, anchor.y);\n    if (element instanceof Element) {\n      const closestPart = ViewContainerPart.closestPart(element);\n      if (closestPart && closestPart.id) {\n        return find(this.containerLayout.iter(), part => part.id === closestPart.id);\n      }\n    }\n    return undefined;\n  }\n\n  protected createPartId(widget: Widget): string {\n    const description = this.widgetManager.getDescription(widget);\n    return widget.id || JSON.stringify(description);\n  }\n\n  protected attachNewPart(newPart: ViewContainerPart, insertIndex?: number): Disposable {\n    const toRemoveWidget = new DisposableCollection();\n    this.toDispose.push(toRemoveWidget);\n    this.toRemoveWidgets.set(newPart.wrapped.id, toRemoveWidget);\n    toRemoveWidget.push(Disposable.create(() => this.toRemoveWidgets.delete(newPart.wrapped.id)));\n    this.registerPart(newPart);\n    if (insertIndex !== undefined || (newPart.options && newPart.options.order !== undefined)) {\n      const index = insertIndex ?? this.getParts().findIndex(part => part.options.order === undefined || part.options.order > newPart.options.order!);\n      if (index >= 0) {\n        this.containerLayout.insertWidget(index, newPart);\n      } else {\n        this.containerLayout.addWidget(newPart);\n      }\n    } else {\n      this.containerLayout.addWidget(newPart);\n    }\n    this.refreshMenu(newPart);\n    this.updateTitle();\n    this.updateCurrentPart();\n    this.update();\n    this.fireDidChangeTrackableWidgets();\n    toRemoveWidget.pushAll([\n      Disposable.create(() => {\n        if (newPart.currentViewContainerId === this.id) {\n          newPart.dispose();\n        }\n        this.unregisterPart(newPart);\n        if (!newPart.isDisposed && this.getPartIndex(newPart.id) > -1) {\n          this.containerLayout.removeWidget(newPart);\n        }\n        if (!this.isDisposed) {\n          this.update();\n          this.updateTitle();\n          this.updateCurrentPart();\n          this.fireDidChangeTrackableWidgets();\n        }\n      }),\n      this.registerDND(newPart),\n      newPart.onDidChangeVisibility(() => {\n        this.updateTitle();\n        this.updateCurrentPart();\n      }),\n      newPart.onCollapsed(() => {\n        this.containerLayout.updateCollapsed(newPart, this.enableAnimation);\n        this.updateCurrentPart();\n      }),\n      newPart.onContextMenu(event => {\n        if (event.button === 2) {\n          event.preventDefault();\n          event.stopPropagation();\n          this.contextMenuRenderer.render({menuPath: this.contextMenuPath, anchor: event});\n        }\n      }),\n      newPart.onTitleChanged(() => this.refreshMenu(newPart)),\n      newPart.onDidFocus(() => this.updateCurrentPart(newPart))\n    ]);\n\n    newPart.disposed.connect(() => toRemoveWidget.dispose());\n    return toRemoveWidget;\n  }\n\n  protected createPart(widget: Widget, partId: string, originalContainerId: string, originalContainerTitle?: ViewContainerTitleOptions,\n                       options?: ViewContainer.Factory.WidgetOptions): ViewContainerPart {\n\n    return new ViewContainerPart(widget, partId, this.id, originalContainerId, originalContainerTitle, this.toolbarRegistry, this.toolbarFactory, options);\n  }\n\n  protected getPartIndex(partId: string | undefined): number {\n    if (partId) {\n      return this.getParts().findIndex(part => part.id === partId);\n    }\n    return -1;\n  }\n\n  protected doStoreState(): ViewContainer.State {\n    const parts = this.getParts();\n    const availableSize = this.containerLayout.getAvailableSize();\n    const orientation = this.orientation;\n    const partStates = parts.map(part => {\n      let size = this.containerLayout.getPartSize(part);\n      if (size && size > ViewContainerPart.HEADER_HEIGHT && orientation === 'vertical') {\n        size -= ViewContainerPart.HEADER_HEIGHT;\n      }\n      return <ViewContainerPart.State>{\n        widget: part.wrapped,\n        partId: part.partId,\n        collapsed: part.collapsed,\n        hidden: part.isHidden,\n        relativeSize: size && availableSize ? size / availableSize : undefined,\n        originalContainerId: part.originalContainerId,\n        originalContainerTitle: part.originalContainerTitle\n      };\n    });\n    return {parts: partStates, title: this.titleOptions};\n  }\n\n  protected doRestoreState(state: ViewContainer.State): void {\n    this.setTitleOptions(state.title);\n    // restore widgets\n    for (const part of state.parts) {\n      if (part.widget) {\n        this.addWidget(part.widget, undefined, part.originalContainerId, part.originalContainerTitle || {} as ViewContainerTitleOptions);\n      }\n    }\n    const partStates = state.parts.filter(partState => some(this.containerLayout.iter(), p => p.partId === partState.partId));\n\n    // Reorder the parts according to the stored state\n    for (let index = 0; index < partStates.length; index++) {\n      const partState = partStates[index];\n      const currentIndex = this.getParts().findIndex(part => part.partId === partState.partId);\n      if (currentIndex > index) {\n        this.containerLayout.moveWidget(currentIndex, index, this.getParts()[currentIndex]);\n      }\n    }\n\n    // Restore visibility and collapsed state\n    const parts = this.getParts();\n    for (let index = 0; index < parts.length; index++) {\n      const part = parts[index];\n      const partState = partStates.find(s => part.partId === s.partId);\n      if (partState) {\n        part.setHidden(partState.hidden);\n        part.collapsed = partState.collapsed || !partState.relativeSize;\n      } else if (part.canHide) {\n        part.hide();\n      }\n      this.refreshMenu(part);\n    }\n\n    // Restore part sizes\n    waitForRevealed(this).then(() => {\n      this.containerLayout.setPartSizes(partStates.map(partState => partState.relativeSize));\n    });\n  }\n\n  /**\n   * Register a command to toggle the visibility of the new part.\n   */\n  protected registerPart(toRegister: ViewContainerPart): void {\n    const commandId = this.toggleVisibilityCommandId(toRegister);\n    this.commandRegistry.registerCommand({id: commandId}, {\n      execute: () => {\n        const toHide = find(this.containerLayout.iter(), part => part.id === toRegister.id);\n        if (toHide) {\n          toHide.setHidden(!toHide.isHidden);\n        }\n      },\n      isToggled: () => {\n        if (!toRegister.canHide) {\n          return true;\n        }\n        const widgetToToggle = find(this.containerLayout.iter(), part => part.id === toRegister.id);\n        if (widgetToToggle) {\n          return !widgetToToggle.isHidden;\n        }\n        return false;\n      },\n      isEnabled: arg => toRegister.canHide && (!this.titleOptions || !(arg instanceof Widget) || (arg instanceof ViewContainer && arg.id === this.id)),\n      isVisible: arg => !this.titleOptions || !(arg instanceof Widget) || (arg instanceof ViewContainer && arg.id === this.id)\n    });\n  }\n\n  /**\n   * Register a menu action to toggle the visibility of the new part.\n   * The menu action is unregistered first to enable refreshing the order of menu actions.\n   */\n  protected refreshMenu(part: ViewContainerPart): void {\n    const commandId = this.toggleVisibilityCommandId(part);\n    this.menuRegistry.unregisterMenuAction(commandId);\n    if (!part.wrapped.title.label) {\n      return;\n    }\n    const {dataset: {visibilityCommandLabel}, caption, label} = part.wrapped.title;\n    const action: MenuAction = {\n      commandId: commandId,\n      label: visibilityCommandLabel || caption || label,\n      order: this.getParts().indexOf(part).toString()\n    };\n    this.menuRegistry.registerMenuAction([...this.contextMenuPath, '1_widgets'], action);\n    if (this.titleOptions) {\n      this.menuRegistry.registerMenuAction([...SIDE_PANEL_TOOLBAR_CONTEXT_MENU, 'navigation'], action);\n    }\n  }\n\n  protected unregisterPart(part: ViewContainerPart): void {\n    const commandId = this.toggleVisibilityCommandId(part);\n    this.commandRegistry.unregisterCommand(commandId);\n    this.menuRegistry.unregisterMenuAction(commandId);\n  }\n\n  protected toggleVisibilityCommandId(part: ViewContainerPart): string {\n    return `${this.id}:toggle-visibility-${part.id}`;\n  }\n\n  protected moveBefore(toMovedId: string, moveBeforeThisId: string): void {\n    const parts = this.getParts();\n    const toMoveIndex = parts.findIndex(part => part.id === toMovedId);\n    const moveBeforeThisIndex = parts.findIndex(part => part.id === moveBeforeThisId);\n    if (toMoveIndex >= 0 && moveBeforeThisIndex >= 0) {\n      this.containerLayout.moveWidget(toMoveIndex, moveBeforeThisIndex, parts[toMoveIndex]);\n      for (let index = Math.min(toMoveIndex, moveBeforeThisIndex); index < parts.length; index++) {\n        this.refreshMenu(parts[index]);\n        this.activate();\n      }\n    }\n  }\n\n  protected fireDidChangeTrackableWidgets(): void {\n    this.onDidChangeTrackableWidgetsEmitter.fire(this.getTrackableWidgets());\n  }\n\n  protected revealPart(id: string): ViewContainerPart | undefined {\n    const part = this.getParts().find(p => p.wrapped.id === id);\n    if (!part) {\n      return undefined;\n    }\n    part.setHidden(false);\n    return part;\n  }\n\n  protected onActivateRequest(msg: Message): void {\n    super.onActivateRequest(msg);\n    if (this.currentPart) {\n      this.currentPart.activate();\n    } else {\n      this.panel.node.focus({preventScroll: true});\n    }\n  }\n\n  protected onAfterAttach(msg: Message): void {\n    const orientation = this.orientation;\n    this.containerLayout.orientation = orientation;\n    if (orientation === 'horizontal') {\n      for (const part of this.getParts()) {\n        part.collapsed = false;\n      }\n    }\n    super.onAfterAttach(msg);\n  }\n\n  protected onBeforeHide(msg: Message): void {\n    super.onBeforeHide(msg);\n    this.lastVisibleState = this.storeState();\n  }\n\n  protected onAfterShow(msg: Message): void {\n    super.onAfterShow(msg);\n    this.updateTitle();\n    this.lastVisibleState = undefined;\n  }\n\n  protected onBeforeAttach(msg: Message): void {\n    super.onBeforeAttach(msg);\n    this.node.addEventListener('p-dragenter', this, true);\n    this.node.addEventListener('p-dragover', this, true);\n    this.node.addEventListener('p-dragleave', this, true);\n    this.node.addEventListener('p-drop', this, true);\n  }\n\n  protected onAfterDetach(msg: Message): void {\n    super.onAfterDetach(msg);\n    this.node.removeEventListener('p-dragenter', this, true);\n    this.node.removeEventListener('p-dragover', this, true);\n    this.node.removeEventListener('p-dragleave', this, true);\n    this.node.removeEventListener('p-drop', this, true);\n  }\n\n  protected registerDND(part: ViewContainerPart): Disposable {\n    part.headerElement.draggable = true;\n\n    return new DisposableCollection(\n        addEventListener(part.headerElement, 'dragstart',\n            event => {\n              event.preventDefault();\n              const mimeData = new MimeData();\n              mimeData.setData('application/vnd.phosphor.view-container-factory', () => part);\n              const clonedHeader = part.headerElement.cloneNode(true) as HTMLElement;\n              clonedHeader.style.width = part.node.style.width;\n              clonedHeader.style.opacity = '0.6';\n              const drag = new Drag({\n                mimeData,\n                dragImage: clonedHeader,\n                proposedAction: 'move',\n                supportedActions: 'move'\n              });\n              part.node.classList.add('p-mod-hidden');\n              drag.start(event.clientX, event.clientY).then(dropAction => {\n                // The promise is resolved when the drag has ended\n                if (dropAction === 'move' && part.currentViewContainerId !== this.id) {\n                  this.removeWidget(part.wrapped);\n                  this.lastVisibleState = this.doStoreState();\n                }\n              });\n              setTimeout(() => {\n                part.node.classList.remove('p-mod-hidden');\n              }, 0);\n            }, false));\n  }\n\n  protected getDockPanel(): DockPanel | undefined {\n    let panel: DockPanel | undefined;\n    let parent = this.parent;\n    while (!panel && parent) {\n      if (this.isSideDockPanel(parent)) {\n        panel = parent as DockPanel;\n      } else {\n        parent = parent.parent;\n      }\n    }\n    return panel;\n  }\n\n  protected isSideDockPanel(widget: Widget): boolean {\n    // @ts-ignore\n    const {leftPanelHandler, rightPanelHandler} = this.shell;\n    if (widget instanceof DockPanel && (widget.id === rightPanelHandler.dockPanel.id || widget.id === leftPanelHandler.dockPanel.id)) {\n      return true;\n    }\n    return false;\n  }\n\n}\n\nexport namespace ViewContainer {\n\n  export const Factory = Symbol('ViewContainerFactory');\n\n  export interface Factory {\n    (options: ViewContainerIdentifier): ViewContainer;\n  }\n\n  export namespace Factory {\n\n    export interface WidgetOptions {\n      readonly order?: number;\n      readonly weight?: number;\n      readonly initiallyCollapsed?: boolean;\n      readonly canHide?: boolean;\n      readonly initiallyHidden?: boolean;\n      /**\n       * Disable dragging this part from its original container to other containers,\n       * But allow dropping parts from other containers on it,\n       * This option only applies to the `ViewContainerPart` and has no effect on the ViewContainer.\n       */\n      readonly disableDraggingToOtherContainers?: boolean;\n    }\n\n    export interface WidgetDescriptor {\n      readonly widget: Widget | interfaces.ServiceIdentifier<Widget>;\n      readonly options?: WidgetOptions;\n    }\n\n  }\n\n  export interface State {\n    title?: ViewContainerTitleOptions;\n    parts: ViewContainerPart.State[]\n  }\n\n  export function getOrientation(node: HTMLElement): 'horizontal' | 'vertical' {\n    if (node.closest(`#${MAIN_AREA_ID}`) || node.closest(`#${BOTTOM_AREA_ID}`)) {\n      return 'horizontal';\n    }\n    return 'vertical';\n  }\n}\n\n/**\n * Wrapper around a widget held by a view container. Adds a header to display the\n * title, toolbar, and collapse / expand handle.\n */\nexport class ViewContainerPart extends BaseWidget {\n\n  /**\n   * @deprecated since 0.11.0, use `onDidChangeVisibility` instead\n   */\n  readonly onVisibilityChanged = this.onDidChangeVisibility;\n  uncollapsedSize: number | undefined;\n  animatedSize: number | undefined;\n  protected readonly header: HTMLElement;\n  protected readonly body: HTMLElement;\n  protected readonly collapsedEmitter = new Emitter<boolean>();\n  protected readonly contextMenuEmitter = new Emitter<MouseEvent>();\n  protected readonly onTitleChangedEmitter = new Emitter<void>();\n  readonly onTitleChanged = this.onTitleChangedEmitter.event;\n  protected readonly onDidFocusEmitter = new Emitter<this>();\n  readonly onDidFocus = this.onDidFocusEmitter.event;\n  protected readonly onPartMovedEmitter = new Emitter<ViewContainer>();\n  readonly onDidMove = this.onPartMovedEmitter.event;\n  protected readonly onDidChangeDescriptionEmitter = new Emitter<void>();\n  readonly onDidChangeDescription = this.onDidChangeDescriptionEmitter.event;\n  protected readonly toolbar: TabBarToolbar;\n  protected readonly toNoDisposeWrapped: Disposable;\n  protected readonly toShowHeader = new DisposableCollection();\n\n  constructor(\n      readonly wrapped: Widget,\n      readonly partId: string,\n      protected currentContainerId: string,\n      readonly originalContainerId: string,\n      readonly originalContainerTitle: ViewContainerTitleOptions | undefined,\n      protected readonly toolbarRegistry: TabBarToolbarRegistry,\n      protected readonly toolbarFactory: TabBarToolbarFactory,\n      readonly options: ViewContainer.Factory.WidgetOptions = {}\n  ) {\n    super();\n    wrapped.parent = this;\n    wrapped.disposed.connect(() => this.dispose());\n    this.id = `${originalContainerId}--${wrapped.id}`;\n    this.addClass('part');\n\n    const fireTitleChanged = () => this.onTitleChangedEmitter.fire(undefined);\n    this.wrapped.title.changed.connect(fireTitleChanged);\n    this.toDispose.push(Disposable.create(() => this.wrapped.title.changed.disconnect(fireTitleChanged)));\n\n    if (DescriptionWidget.is(this.wrapped)) {\n      const fireDescriptionChanged = () => this.onDidChangeDescriptionEmitter.fire(undefined);\n      this.toDispose.push(this.wrapped?.onDidChangeDescription.event(fireDescriptionChanged));\n    }\n\n    const {header, body, disposable} = this.createContent();\n    this.header = header;\n    this.body = body;\n\n    this.toNoDisposeWrapped = this.toDispose.push(wrapped);\n    this.toolbar = this.toolbarFactory();\n    this.toolbar.addClass('tart-view-container-part-title');\n\n    this.toolbar.updateTarget(this.wrapped);\n\n    this.toDispose.pushAll([\n      disposable,\n      this.toolbar,\n      this.toolbar.onExecuteCommand(() => this.toolbar.updateTarget(this.wrapped)),\n      this.toolbarRegistry.onDidChange(() => this.toolbar.updateTarget(this.wrapped)),\n      this.collapsedEmitter,\n      this.contextMenuEmitter,\n      this.onTitleChangedEmitter,\n      this.onDidChangeDescriptionEmitter,\n      this.registerContextMenu(),\n      this.onDidFocusEmitter,\n      // focus event does not bubble, capture it\n      addEventListener(this.node, 'focus', () => this.onDidFocusEmitter.fire(this), true)\n    ])\n    ;\n    this.scrollOptions = {\n      suppressScrollX: true,\n      minScrollbarLength: 35\n    };\n    this.collapsed = !!options.initiallyCollapsed;\n    if (options.initiallyHidden && this.canHide) {\n      this.hide();\n    }\n  }\n\n  protected _collapsed: boolean;\n\n  get collapsed(): boolean {\n    return this._collapsed;\n  }\n\n  set collapsed(collapsed: boolean) {\n    // Cannot collapse/expand if the orientation of the container is `horizontal`.\n    const orientation = ViewContainer.getOrientation(this.node);\n    if (this._collapsed === collapsed || orientation === 'horizontal' && collapsed) {\n      return;\n    }\n    this._collapsed = collapsed;\n    this.node.classList.toggle('collapsed', collapsed);\n    if (collapsed && this.wrapped.node.contains(document.activeElement)) {\n      this.header.focus();\n    }\n    this.wrapped.setHidden(collapsed);\n    const toggleIcon = this.header.querySelector(`span.${EXPANSION_TOGGLE_CLASS}`);\n    if (toggleIcon) {\n      if (collapsed) {\n        toggleIcon.classList.add(COLLAPSED_CLASS);\n      } else {\n        toggleIcon.classList.remove(COLLAPSED_CLASS);\n      }\n    }\n    this.update();\n    this.collapsedEmitter.fire(collapsed);\n  }\n\n  get viewContainer(): ViewContainer | undefined {\n    return this.parent ? this.parent.parent as ViewContainer : undefined;\n  }\n\n  get currentViewContainerId(): string {\n    return this.currentContainerId;\n  }\n\n  get headerElement(): HTMLElement {\n    return this.header;\n  }\n\n  get canHide(): boolean {\n    return this.options.canHide === undefined || this.options.canHide;\n  }\n\n  get onCollapsed(): CommonEvent<boolean> {\n    return this.collapsedEmitter.event;\n  }\n\n  get onContextMenu(): CommonEvent<MouseEvent> {\n    return this.contextMenuEmitter.event;\n  }\n\n  get minSize(): number {\n    const style = getComputedStyle(this.body);\n    if (ViewContainer.getOrientation(this.node) === 'horizontal') {\n      return parseCssMagnitude(style.minWidth, 0);\n    } else {\n      return parseCssMagnitude(style.minHeight, 0);\n    }\n  }\n\n  get titleHidden(): boolean {\n    return !this.toShowHeader.disposed || this.collapsed;\n  }\n\n  onPartMoved(newContainer: ViewContainer): void {\n    this.currentContainerId = newContainer.id;\n    this.onPartMovedEmitter.fire(newContainer);\n  }\n\n  setHidden(hidden: boolean): void {\n    if (!this.canHide) {\n      return;\n    }\n    super.setHidden(hidden);\n  }\n\n  showTitle(): void {\n    this.toShowHeader.dispose();\n  }\n\n  hideTitle(): void {\n    if (this.titleHidden) {\n      return;\n    }\n    const display = this.header.style.display;\n    const height = this.body.style.height;\n    this.body.style.height = '100%';\n    this.header.style.display = 'none';\n    this.toShowHeader.push(Disposable.create(() => {\n      this.header.style.display = display;\n      this.body.style.height = height;\n    }));\n  }\n\n  protected getScrollContainer(): HTMLElement {\n    return this.body;\n  }\n\n  protected registerContextMenu(): Disposable {\n    return new DisposableCollection(\n        addEventListener(this.header, 'contextmenu', event => {\n          this.contextMenuEmitter.fire(event);\n        })\n    );\n  }\n\n  protected createContent(): { header: HTMLElement, body: HTMLElement, disposable: Disposable } {\n    const disposable = new DisposableCollection();\n    const {header, disposable: headerDisposable} = this.createHeader();\n    const body = document.createElement('div');\n    body.classList.add('body');\n    this.node.appendChild(header);\n    this.node.appendChild(body);\n    disposable.push(headerDisposable);\n    return {\n      header,\n      body,\n      disposable,\n    };\n  }\n\n  protected createHeader(): { header: HTMLElement, disposable: Disposable } {\n    const disposable = new DisposableCollection();\n    const header = document.createElement('div');\n    header.tabIndex = 0;\n    header.classList.add('tart-header', 'header', 'tart-view-container-part-header');\n    disposable.push(addEventListener(header, 'click', event => {\n      if (this.toolbar && this.toolbar.shouldHandleMouseEvent(event)) {\n        return;\n      }\n      this.collapsed = !this.collapsed;\n    }));\n    disposable.push(addKeyListener(header, Key.ARROW_LEFT, () => this.collapsed = true));\n    disposable.push(addKeyListener(header, Key.ARROW_RIGHT, () => this.collapsed = false));\n    disposable.push(addKeyListener(header, Key.ENTER, () => this.collapsed = !this.collapsed));\n\n    const toggleIcon = document.createElement('span');\n    toggleIcon.classList.add(EXPANSION_TOGGLE_CLASS, ...CODICON_TREE_ITEM_CLASSES);\n    if (this.collapsed) {\n      toggleIcon.classList.add(COLLAPSED_CLASS);\n    }\n    header.appendChild(toggleIcon);\n\n    const title = document.createElement('span');\n    title.classList.add('label', 'noselect');\n\n    const description = document.createElement('span');\n    description.classList.add('description');\n\n    const updateTitle = () => {\n      if (this.currentContainerId !== this.originalContainerId && this.originalContainerTitle?.label) {\n        // Creating a title in format: <original_container_title>: <part_title>.\n        title.innerText = this.originalContainerTitle.label + ': ' + this.wrapped.title.label;\n      } else {\n        title.innerText = this.wrapped.title.label;\n      }\n    };\n    const updateCaption = () => title.title = this.wrapped.title.caption || this.wrapped.title.label;\n    const updateDescription = () => {\n      description.innerText = DescriptionWidget.is(this.wrapped) && !this.collapsed && this.wrapped.description || '';\n    };\n\n    updateTitle();\n    updateCaption();\n    updateDescription();\n\n    disposable.pushAll([\n      this.onTitleChanged(updateTitle),\n      this.onTitleChanged(updateCaption),\n      this.onDidMove(updateTitle),\n      this.onDidChangeDescription(updateDescription),\n      this.onCollapsed(updateDescription)\n    ]);\n    header.appendChild(title);\n    header.appendChild(description);\n\n    return {\n      header,\n      disposable\n    };\n  }\n\n  protected onResize(msg: Widget.ResizeMessage): void {\n    if (this.wrapped.isAttached && !this.collapsed) {\n      MessageLoop.sendMessage(this.wrapped, Widget.ResizeMessage.UnknownSize);\n    }\n    super.onResize(msg);\n  }\n\n  protected onUpdateRequest(msg: Message): void {\n    if (this.wrapped.isAttached && !this.collapsed) {\n      MessageLoop.sendMessage(this.wrapped, msg);\n    }\n    super.onUpdateRequest(msg);\n  }\n\n  protected onAfterAttach(msg: Message): void {\n    if (!this.wrapped.isAttached) {\n      UnsafeWidgetUtilities.attach(this.wrapped, this.body);\n    }\n    UnsafeWidgetUtilities.attach(this.toolbar, this.header);\n    super.onAfterAttach(msg);\n  }\n\n  protected onBeforeDetach(msg: Message): void {\n    super.onBeforeDetach(msg);\n    if (this.toolbar.isAttached) {\n      Widget.detach(this.toolbar);\n    }\n    if (this.wrapped.isAttached) {\n      UnsafeWidgetUtilities.detach(this.wrapped);\n    }\n  }\n\n  protected onBeforeShow(msg: Message): void {\n    if (this.wrapped.isAttached && !this.collapsed) {\n      MessageLoop.sendMessage(this.wrapped, msg);\n    }\n    super.onBeforeShow(msg);\n  }\n\n  protected onAfterShow(msg: Message): void {\n    super.onAfterShow(msg);\n    if (this.wrapped.isAttached && !this.collapsed) {\n      MessageLoop.sendMessage(this.wrapped, msg);\n    }\n  }\n\n  protected onBeforeHide(msg: Message): void {\n    if (this.wrapped.isAttached && !this.collapsed) {\n      MessageLoop.sendMessage(this.wrapped, msg);\n    }\n    super.onBeforeShow(msg);\n  }\n\n  protected onAfterHide(msg: Message): void {\n    super.onAfterHide(msg);\n    if (this.wrapped.isAttached && !this.collapsed) {\n      MessageLoop.sendMessage(this.wrapped, msg);\n    }\n  }\n\n  protected onChildRemoved(msg: Widget.ChildMessage): void {\n    super.onChildRemoved(msg);\n    // if wrapped is not disposed, but detached then we should not dispose it, but only get rid of this part\n    this.toNoDisposeWrapped.dispose();\n    this.dispose();\n  }\n\n  protected onActivateRequest(msg: Message): void {\n    super.onActivateRequest(msg);\n    if (this.collapsed) {\n      this.header.focus();\n    } else {\n      this.wrapped.activate();\n    }\n  }\n\n}\n\nexport namespace ViewContainerPart {\n\n  /**\n   * Make sure to adjust the `line-height` of the `.tart-view-container .part > .header` CSS class when modifying this, and vice versa.\n   */\n  export const HEADER_HEIGHT = 22;\n\n  export interface State {\n    widget?: Widget\n    partId: string;\n    collapsed: boolean;\n    hidden: boolean;\n    relativeSize?: number;\n    description?: string;\n    /** The original container to which this part belongs */\n    originalContainerId: string;\n    originalContainerTitle?: ViewContainerTitleOptions;\n  }\n\n  export function closestPart(element: Element | EventTarget | null, selector: string = 'div.part'): Element | undefined {\n    if (element instanceof Element) {\n      const part = element.closest(selector);\n      if (part instanceof Element) {\n        return part;\n      }\n    }\n    return undefined;\n  }\n}\n\nexport class ViewContainerLayout extends SplitLayout {\n\n  constructor(protected options: ViewContainerLayout.Options, protected readonly splitPositionHandler: SplitPositionHandler) {\n    super(options);\n  }\n\n  get widget(): ViewContainerPart[] {\n    return toArray(this.iter());\n  }\n\n  protected get items(): ReadonlyArray<LayoutItem & ViewContainerLayout.Item> {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (this as any)._items as Array<LayoutItem & ViewContainerLayout.Item>;\n  }\n\n  iter(): IIterator<ViewContainerPart> {\n    return map(this.items, item => item.widget);\n  }\n\n  attachWidget(index: number, widget: ViewContainerPart): void {\n    super.attachWidget(index, widget);\n    if (index > -1 && this.parent && this.parent.node.contains(this.widget[index + 1]?.node)) {\n      // Set the correct attach index to the DOM elements.\n      const ref = this.widget[index + 1].node;\n      this.parent.node.insertBefore(widget.node, ref);\n      this.parent.node.insertBefore(this.handles[index], ref);\n      this.parent.fit();\n    }\n  }\n\n  moveWidget(fromIndex: number, toIndex: number, widget: Widget): void {\n    const ref = this.widget[toIndex < fromIndex ? toIndex : toIndex + 1];\n    super.moveWidget(fromIndex, toIndex, widget);\n    // Keep the order of `_widget` array just as done before (by `super`) for the `_items` array -\n    // to prevent later bugs relying on index.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ArrayExt.move((this as any)._widget, fromIndex, toIndex);\n    if (ref) {\n      this.parent!.node.insertBefore(this.handles[toIndex], ref.node);\n    } else {\n      this.parent!.node.appendChild(this.handles[toIndex]);\n    }\n    UnsafeWidgetUtilities.detach(widget);\n    UnsafeWidgetUtilities.attach(widget, this.parent!.node, this.handles[toIndex]);\n  }\n\n  getPartSize(part: ViewContainerPart): number | undefined {\n    if (part.collapsed || part.isHidden) {\n      return part.uncollapsedSize;\n    }\n    if (this.orientation === 'horizontal') {\n      return part.node.offsetWidth;\n    } else {\n      return part.node.offsetHeight;\n    }\n  }\n\n  /**\n   * Set the sizes of the view container parts according to the given weights\n   * by moving the split handles. This is similar to `setRelativeSizes` defined\n   * in `SplitLayout`, but here we properly consider the collapsed / expanded state.\n   */\n  setPartSizes(weights: (number | undefined)[]): void {\n    const parts = this.widget;\n    const availableSize = this.getAvailableSize();\n\n    // Sum up the weights of visible parts\n    let totalWeight = 0;\n    let weightCount = 0;\n    for (let index = 0; index < weights.length && index < parts.length; index++) {\n      const part = parts[index];\n      const weight = weights[index];\n      if (weight && !part.isHidden && !part.collapsed) {\n        totalWeight += weight;\n        weightCount++;\n      }\n    }\n    if (weightCount === 0 || availableSize === 0) {\n      return;\n    }\n\n    // Add the average weight for visible parts without weight\n    const averageWeight = totalWeight / weightCount;\n    for (let index = 0; index < weights.length && index < parts.length; index++) {\n      const part = parts[index];\n      const weight = weights[index];\n      if (!weight && !part.isHidden && !part.collapsed) {\n        totalWeight += averageWeight;\n      }\n    }\n\n    // Apply the weights to compute actual sizes\n    let position = 0;\n    for (let index = 0; index < weights.length && index < parts.length - 1; index++) {\n      const part = parts[index];\n      if (!part.isHidden) {\n        if (this.orientation === 'vertical') {\n          position += this.options.headerSize;\n        }\n        const weight = weights[index];\n        if (part.collapsed) {\n          if (weight) {\n            part.uncollapsedSize = weight / totalWeight * availableSize;\n          }\n        } else {\n          let contentSize = (weight || averageWeight) / totalWeight * availableSize;\n          const minSize = part.minSize;\n          if (contentSize < minSize) {\n            contentSize = minSize;\n          }\n          position += contentSize;\n        }\n        this.setHandlePosition(index, position);\n        position += this.spacing;\n      }\n    }\n  }\n\n  /**\n   * Determine the size of the split panel area that is available for widget content,\n   * i.e. excluding part headers and split handles.\n   */\n  getAvailableSize(): number {\n    if (!this.parent || !this.parent.isAttached) {\n      return 0;\n    }\n    const parts = this.widget;\n    const visiblePartCount = parts.filter(part => !part.isHidden).length;\n    let availableSize: number;\n    if (this.orientation === 'horizontal') {\n      availableSize = this.parent.node.offsetWidth;\n    } else {\n      availableSize = this.parent.node.offsetHeight;\n      availableSize -= visiblePartCount * this.options.headerSize;\n    }\n    availableSize -= (visiblePartCount - 1) * this.spacing;\n    if (availableSize < 0) {\n      return 0;\n    }\n    return availableSize;\n  }\n\n  /**\n   * Update a view container part that has been collapsed or expanded. The transition\n   * to the new state is animated.\n   */\n  updateCollapsed(part: ViewContainerPart, enableAnimation: boolean): void {\n    const index = this.items.findIndex(item => item.widget === part);\n    if (index < 0 || !this.parent || part.isHidden) {\n      return;\n    }\n\n    // Do not store the height of the \"stretched item\". Otherwise, we mess up the \"hint height\".\n    // Store the height only if there are other expanded items.\n    const currentSize = this.orientation === 'horizontal' ? part.node.offsetWidth : part.node.offsetHeight;\n    if (part.collapsed && this.items.some(item => !item.widget.collapsed && !item.widget.isHidden)) {\n      part.uncollapsedSize = currentSize;\n    }\n\n    if (!enableAnimation || this.options.animationDuration <= 0) {\n      MessageLoop.postMessage(this.parent, Widget.Msg.FitRequest);\n      return;\n    }\n    let startTime: number | undefined = undefined;\n    const duration = this.options.animationDuration;\n    const direction = part.collapsed ? 'collapse' : 'expand';\n    let fullSize: number;\n    if (direction === 'collapse') {\n      fullSize = currentSize - this.options.headerSize;\n    } else {\n      fullSize = Math.max((part.uncollapsedSize || 0) - this.options.headerSize, part.minSize);\n      if (this.items.filter(item => !item.widget.collapsed && !item.widget.isHidden).length === 1) {\n        // Expand to full available size\n        fullSize = Math.max(fullSize, this.getAvailableSize());\n      }\n    }\n\n    // The update function is called on every animation frame until the predefined duration has elapsed.\n    const updateFunc = (time: number) => {\n      if (!this.parent) {\n        part.animatedSize = undefined;\n        return;\n      }\n      if (startTime === undefined) {\n        startTime = time;\n      }\n      if (time - startTime < duration) {\n        // Render an intermediate state for the animation\n        const t = this.tween((time - startTime) / duration);\n        if (direction === 'collapse') {\n          part.animatedSize = (1 - t) * fullSize;\n        } else {\n          part.animatedSize = t * fullSize;\n        }\n        requestAnimationFrame(updateFunc);\n      } else {\n        // The animation is finished\n        if (direction === 'collapse') {\n          part.animatedSize = undefined;\n        } else {\n          part.animatedSize = fullSize;\n          // Request another frame to reset the part to variable size\n          requestAnimationFrame(() => {\n            part.animatedSize = undefined;\n            if (this.parent) {\n              MessageLoop.sendMessage(this.parent, Widget.Msg.FitRequest);\n            }\n          });\n        }\n      }\n      MessageLoop.sendMessage(this.parent, Widget.Msg.FitRequest);\n    };\n    requestAnimationFrame(updateFunc);\n  }\n\n  setHandlePosition(index: number, position: number): Promise<void> {\n    const options: SplitPositionOptions = {\n      referenceWidget: this.widget[index],\n      duration: 0\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return this.splitPositionHandler.setSplitHandlePosition(this.parent as SplitPanel, index, position, options) as Promise<any>;\n  }\n\n  protected onFitRequest(msg: Message): void {\n    for (const part of this.widget) {\n      const style = part.node.style;\n      if (part.animatedSize !== undefined) {\n        // The part size has been fixed for animating the transition to collapsed / expanded state\n        const fixedSize = `${this.options.headerSize + part.animatedSize}px`;\n        style.minHeight = fixedSize;\n        style.maxHeight = fixedSize;\n      } else if (part.collapsed) {\n        // The part size is fixed to the header size\n        const fixedSize = `${this.options.headerSize}px`;\n        style.minHeight = fixedSize;\n        style.maxHeight = fixedSize;\n      } else {\n        const minSize = `${this.options.headerSize + part.minSize}px`;\n        style.minHeight = minSize;\n        style.maxHeight = '';\n      }\n    }\n    super.onFitRequest(msg);\n  }\n\n  /**\n   * Sinusoidal tween function for smooth animation.\n   */\n  protected tween(t: number): number {\n    return 0.5 * (1 - Math.cos(Math.PI * t));\n  }\n\n}\n\nexport namespace ViewContainerLayout {\n\n  export interface Options extends SplitLayout.IOptions {\n    headerSize: number;\n    animationDuration: number;\n  }\n\n  export interface Item {\n    readonly widget: ViewContainerPart;\n  }\n\n}\n"]}