{"version":3,"sources":["browser/status-bar/status-bar.tsx"],"names":[],"mappings":"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","file":"../../../src/browser/status-bar/status-bar.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from 'react';\nimport {inject, injectable} from 'inversify';\nimport {CommandService} from '../../common';\nimport {ReactWidget} from '../widgets';\nimport {FrontendApplicationStateService} from '../frontend-application-state';\nimport {LabelIcon, LabelParser} from '../label-parser';\n\nexport interface StatusBarEntry {\n  /**\n   * For icons we use octicons and fontawesome icons. octicons take precedence over fontawesome. Get more information and the class names\n   * here: http://fontawesome.io/icons/\n   * To set a text with icon use the following pattern in text string:\n   * $(fontawesomeClassName)\n   * To use animated icons use the following pattern:\n   * $(fontawesomeClassName~typeOfAnimation)\n   * Type of animation can be either spin or pulse.\n   * Look here for more information to animated icons:\n   * http://fontawesome.io/examples/#animated\n   */\n  text: string;\n  alignment: StatusBarAlignment;\n  color?: string;\n  className?: string;\n  tooltip?: string;\n  command?: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  arguments?: any[];\n  priority?: number;\n  onclick?: (e: MouseEvent) => void;\n}\n\nexport enum StatusBarAlignment {\n  LEFT, RIGHT\n}\n\nexport interface StatusBarEntryAttributes {\n  className?: string;\n  title?: string;\n  style?: object;\n  onClick?: (e: MouseEvent) => void;\n}\n\nexport const STATUSBAR_WIDGET_FACTORY_ID = 'statusBar';\n\nexport const StatusBar = Symbol('StatusBar');\n\nexport interface StatusBar {\n  setBackgroundColor(color?: string): Promise<void>;\n\n  setColor(color?: string): Promise<void>;\n\n  setElement(id: string, entry: StatusBarEntry): Promise<void>;\n\n  removeElement(id: string): Promise<void>;\n}\n\n@injectable()\nexport class StatusBarImpl extends ReactWidget implements StatusBar {\n\n  protected backgroundColor: string | undefined;\n  protected color: string | undefined;\n  protected entries: Map<string, StatusBarEntry> = new Map();\n\n  constructor(\n      @inject(CommandService) protected readonly commands: CommandService,\n      @inject(LabelParser) protected readonly entryService: LabelParser,\n      @inject(FrontendApplicationStateService) protected readonly applicationStateService: FrontendApplicationStateService,\n  ) {\n    super();\n    delete this.scrollOptions;\n    this.id = 'tart-statusBar';\n    this.addClass('noselect');\n    // Hide the status bar until the `workbench.statusBar.visible` preference returns with a `true` value.\n    this.hide();\n    this.setHidden(false);\n  }\n\n  protected get ready(): Promise<void> {\n    return this.applicationStateService.reachedAnyState('initialized_layout', 'ready');\n  }\n\n  async setElement(id: string, entry: StatusBarEntry): Promise<void> {\n    await this.ready;\n    this.entries.set(id, entry);\n    this.update();\n  }\n\n  async removeElement(id: string): Promise<void> {\n    await this.ready;\n    this.entries.delete(id);\n    this.update();\n  }\n\n  async setBackgroundColor(color?: string): Promise<void> {\n    await this.ready;\n    this.internalSetBackgroundColor(color);\n    this.update();\n  }\n\n  async setColor(color?: string): Promise<void> {\n    await this.ready;\n    this.internalSetColor(color);\n    this.update();\n  }\n\n  protected internalSetBackgroundColor(color?: string): void {\n    this.backgroundColor = color;\n    this.node.style.backgroundColor = this.backgroundColor || '';\n  }\n\n  protected internalSetColor(color?: string): void {\n    this.color = color;\n  }\n\n  protected render(): JSX.Element {\n    const leftEntries: JSX.Element[] = [];\n    const rightEntries: JSX.Element[] = [];\n    const elements = Array.from(this.entries).sort((left, right) => {\n      const lp = left[1].priority || 0;\n      const rp = right[1].priority || 0;\n      return rp - lp;\n    });\n    elements.forEach(([id, entry]) => {\n      if (entry.alignment === StatusBarAlignment.LEFT) {\n        leftEntries.push(this.renderElement(id, entry));\n      } else {\n        rightEntries.push(this.renderElement(id, entry));\n      }\n    });\n\n    return <React.Fragment>\n      <div className='area left'>{leftEntries}</div>\n      <div className='area right'>{rightEntries}</div>\n    </React.Fragment>;\n  }\n\n  protected onclick(entry: StatusBarEntry): () => void {\n    return () => {\n      if (entry.command) {\n        const args = entry.arguments || [];\n        this.commands.executeCommand(entry.command, ...args);\n      }\n    };\n  }\n\n  protected createAttributes(entry: StatusBarEntry): StatusBarEntryAttributes {\n    const attrs: StatusBarEntryAttributes = {};\n\n    if (entry.command) {\n      attrs.onClick = this.onclick(entry);\n      attrs.className = 'element hasCommand';\n    } else if (entry.onclick) {\n      attrs.onClick = e => {\n        if (entry.onclick) {\n          entry.onclick(e);\n        }\n      };\n      attrs.className = 'element hasCommand';\n    } else {\n      attrs.className = 'element';\n    }\n\n    if (entry.tooltip) {\n      attrs.title = entry.tooltip;\n    }\n\n    attrs.style = {\n      color: entry.color || this.color\n    };\n\n    if (entry.className) {\n      attrs.className += ' ' + entry.className;\n    }\n\n    return attrs;\n  }\n\n  protected renderElement(id: string, entry: StatusBarEntry): JSX.Element {\n    const childStrings = this.entryService.parse(entry.text);\n    const children: JSX.Element[] = [];\n\n    childStrings.forEach((val, key) => {\n      if (!(typeof val === 'string') && LabelIcon.is(val)) {\n        if (val.name.startsWith('codicon-')) {\n          children.push(\n              <span key={key}\n                    className={`codicon ${val.name}${val.animation ? ' fa-' + val.animation : ''}`}>\n              </span>);\n        } else {\n          children.push(\n              <span key={key}\n                    className={`fa fa-${val.name}${val.animation ? ' fa-' + val.animation : ''}`}>\n              </span>);\n        }\n      } else {\n        children.push(<span key={key}>{val}</span>);\n      }\n    });\n    const elementInnerDiv = <React.Fragment>{children}</React.Fragment>;\n\n    return React.createElement('div', {key: id, ...this.createAttributes(entry)}, elementInnerDiv);\n  }\n\n}\n"]}