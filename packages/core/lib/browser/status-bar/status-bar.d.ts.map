{"version":3,"sources":["browser/status-bar/status-bar.tsx"],"names":[],"mappings":"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","file":"../../../src/browser/status-bar/status-bar.d.ts","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from 'react';\nimport {inject, injectable} from 'inversify';\nimport {CommandService} from '../../common';\nimport {ReactWidget} from '../widgets';\nimport {FrontendApplicationStateService} from '../frontend-application-state';\nimport {LabelIcon, LabelParser} from '../label-parser';\n\nexport interface StatusBarEntry {\n  /**\n   * For icons we use octicons and fontawesome icons. octicons take precedence over fontawesome. Get more information and the class names\n   * here: http://fontawesome.io/icons/\n   * To set a text with icon use the following pattern in text string:\n   * $(fontawesomeClassName)\n   * To use animated icons use the following pattern:\n   * $(fontawesomeClassName~typeOfAnimation)\n   * Type of animation can be either spin or pulse.\n   * Look here for more information to animated icons:\n   * http://fontawesome.io/examples/#animated\n   */\n  text: string;\n  alignment: StatusBarAlignment;\n  color?: string;\n  className?: string;\n  tooltip?: string;\n  command?: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  arguments?: any[];\n  priority?: number;\n  onclick?: (e: MouseEvent) => void;\n}\n\nexport enum StatusBarAlignment {\n  LEFT, RIGHT\n}\n\nexport interface StatusBarEntryAttributes {\n  className?: string;\n  title?: string;\n  style?: object;\n  onClick?: (e: MouseEvent) => void;\n}\n\nexport const STATUSBAR_WIDGET_FACTORY_ID = 'statusBar';\n\nexport const StatusBar = Symbol('StatusBar');\n\nexport interface StatusBar {\n  setBackgroundColor(color?: string): Promise<void>;\n\n  setColor(color?: string): Promise<void>;\n\n  setElement(id: string, entry: StatusBarEntry): Promise<void>;\n\n  removeElement(id: string): Promise<void>;\n}\n\n@injectable()\nexport class StatusBarImpl extends ReactWidget implements StatusBar {\n\n  protected backgroundColor: string | undefined;\n  protected color: string | undefined;\n  protected entries: Map<string, StatusBarEntry> = new Map();\n\n  constructor(\n      @inject(CommandService) protected readonly commands: CommandService,\n      @inject(LabelParser) protected readonly entryService: LabelParser,\n      @inject(FrontendApplicationStateService) protected readonly applicationStateService: FrontendApplicationStateService,\n  ) {\n    super();\n    delete this.scrollOptions;\n    this.id = 'tart-statusBar';\n    this.addClass('noselect');\n    // Hide the status bar until the `workbench.statusBar.visible` preference returns with a `true` value.\n    this.hide();\n    this.setHidden(false);\n  }\n\n  protected get ready(): Promise<void> {\n    return this.applicationStateService.reachedAnyState('initialized_layout', 'ready');\n  }\n\n  async setElement(id: string, entry: StatusBarEntry): Promise<void> {\n    await this.ready;\n    this.entries.set(id, entry);\n    this.update();\n  }\n\n  async removeElement(id: string): Promise<void> {\n    await this.ready;\n    this.entries.delete(id);\n    this.update();\n  }\n\n  async setBackgroundColor(color?: string): Promise<void> {\n    await this.ready;\n    this.internalSetBackgroundColor(color);\n    this.update();\n  }\n\n  async setColor(color?: string): Promise<void> {\n    await this.ready;\n    this.internalSetColor(color);\n    this.update();\n  }\n\n  protected internalSetBackgroundColor(color?: string): void {\n    this.backgroundColor = color;\n    this.node.style.backgroundColor = this.backgroundColor || '';\n  }\n\n  protected internalSetColor(color?: string): void {\n    this.color = color;\n  }\n\n  protected render(): JSX.Element {\n    const leftEntries: JSX.Element[] = [];\n    const rightEntries: JSX.Element[] = [];\n    const elements = Array.from(this.entries).sort((left, right) => {\n      const lp = left[1].priority || 0;\n      const rp = right[1].priority || 0;\n      return rp - lp;\n    });\n    elements.forEach(([id, entry]) => {\n      if (entry.alignment === StatusBarAlignment.LEFT) {\n        leftEntries.push(this.renderElement(id, entry));\n      } else {\n        rightEntries.push(this.renderElement(id, entry));\n      }\n    });\n\n    return <React.Fragment>\n      <div className='area left'>{leftEntries}</div>\n      <div className='area right'>{rightEntries}</div>\n    </React.Fragment>;\n  }\n\n  protected onclick(entry: StatusBarEntry): () => void {\n    return () => {\n      if (entry.command) {\n        const args = entry.arguments || [];\n        this.commands.executeCommand(entry.command, ...args);\n      }\n    };\n  }\n\n  protected createAttributes(entry: StatusBarEntry): StatusBarEntryAttributes {\n    const attrs: StatusBarEntryAttributes = {};\n\n    if (entry.command) {\n      attrs.onClick = this.onclick(entry);\n      attrs.className = 'element hasCommand';\n    } else if (entry.onclick) {\n      attrs.onClick = e => {\n        if (entry.onclick) {\n          entry.onclick(e);\n        }\n      };\n      attrs.className = 'element hasCommand';\n    } else {\n      attrs.className = 'element';\n    }\n\n    if (entry.tooltip) {\n      attrs.title = entry.tooltip;\n    }\n\n    attrs.style = {\n      color: entry.color || this.color\n    };\n\n    if (entry.className) {\n      attrs.className += ' ' + entry.className;\n    }\n\n    return attrs;\n  }\n\n  protected renderElement(id: string, entry: StatusBarEntry): JSX.Element {\n    const childStrings = this.entryService.parse(entry.text);\n    const children: JSX.Element[] = [];\n\n    childStrings.forEach((val, key) => {\n      if (!(typeof val === 'string') && LabelIcon.is(val)) {\n        if (val.name.startsWith('codicon-')) {\n          children.push(\n              <span key={key}\n                    className={`codicon ${val.name}${val.animation ? ' fa-' + val.animation : ''}`}>\n              </span>);\n        } else {\n          children.push(\n              <span key={key}\n                    className={`fa fa-${val.name}${val.animation ? ' fa-' + val.animation : ''}`}>\n              </span>);\n        }\n      } else {\n        children.push(<span key={key}>{val}</span>);\n      }\n    });\n    const elementInnerDiv = <React.Fragment>{children}</React.Fragment>;\n\n    return React.createElement('div', {key: id, ...this.createAttributes(entry)}, elementInnerDiv);\n  }\n\n}\n"]}