{"version":3,"sources":["browser/widget-decoration.ts"],"names":[],"mappings":"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","file":"../../src/browser/widget-decoration.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Namespace for the decoration data and the styling refinements for the decorated widgets.\n */\nexport namespace WidgetDecoration {\n\n  /**\n   * CSS styles for the decorators.\n   */\n  export namespace Styles {\n    export const CAPTION_HIGHLIGHT_CLASS = 'tart-caption-highlight';\n    export const CAPTION_PREFIX_CLASS = 'tart-caption-prefix';\n    export const CAPTION_SUFFIX_CLASS = 'tart-caption-suffix';\n    export const ICON_WRAPPER_CLASS = 'tart-icon-wrapper';\n    export const DECORATOR_SIZE_CLASS = 'tart-decorator-size';\n    export const DECORATOR_SIDEBAR_SIZE_CLASS = 'tart-decorator-sidebar-size';\n    export const TOP_RIGHT_CLASS = 'tart-top-right';\n    export const BOTTOM_RIGHT_CLASS = 'tart-bottom-right';\n    export const BOTTOM_RIGHT_SIDEBAR_CLASS = 'tart-bottom-right-sidebar';\n    export const BOTTOM_LEFT_CLASS = 'tart-bottom-left';\n    export const TOP_LEFT_CLASS = 'tart-top-left';\n  }\n  /**\n   * For the sake of simplicity, we have merged the `font-style`, `font-weight`, and the `text-decoration` together.\n   */\n  export type FontStyle = 'normal' | 'bold' | 'italic' | 'oblique' | 'underline' | 'line-through';\n  /**\n   * A string that could be:\n   *\n   *  - one of the browser colors, (E.g.: `blue`, `red`, `magenta`),\n   *  - the case insensitive hexadecimal color code, (for instance, `#ee82ee`, `#20B2AA`, `#f09` ), or\n   *  - either the `rgb()` or the `rgba()` functions.\n   *\n   * For more details, see: https://developer.mozilla.org/en-US/docs/Web/CSS/color_value.\n   *\n   * Note, it is highly recommended to use one of the predefined colors of Tart, so the desired color will\n   * look nice with both the `light` and the `dark` theme too.\n   */\n  export type Color = string;\n\n  /**\n   * Encapsulates styling information of the font.\n   */\n  export interface FontData {\n    /**\n     * Zero to any font style.\n     */\n    readonly style?: FontStyle | FontStyle[];\n    /**\n     * The color of the font.\n     */\n    readonly color?: Color;\n  }\n\n  /**\n   * Arbitrary information that has to be shown either before or after the caption as a prefix or a suffix.\n   */\n  export interface CaptionAffix {\n    /**\n     * The text content of the prefix or the suffix.\n     */\n    readonly data: string;\n    /**\n     * Font data for customizing the prefix of the suffix.\n     */\n    readonly fontData?: FontData;\n  }\n\n  export interface BaseTailDecoration {\n    /**\n     * Optional tooltip for the tail decoration.\n     */\n    readonly tooltip?: string;\n  }\n\n  /**\n   * Unlike caption suffixes, tail decorations appears right-aligned after the caption and the caption suffixes (is any).\n   */\n  export interface TailDecoration extends BaseTailDecoration {\n    /**\n     * The text content of the tail decoration.\n     */\n    readonly data: string;\n    /**\n     * Font data for customizing the content.\n     */\n    readonly fontData?: FontData;\n  }\n\n  export interface TailDecorationIcon extends BaseTailDecoration {\n    /**\n     * This should be the name of the Font Awesome icon with out the `fa fa-` prefix, just the name, for instance `paw`.\n     * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n     */\n    readonly icon: string;\n    /**\n     * The color of the icon.\n     */\n    readonly color?: Color;\n  }\n\n  export interface TailDecorationIconClass extends BaseTailDecoration {\n    /**\n     * This should be the entire Font Awesome class array, for instance ['fa', 'fa-paw']\n     * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n     */\n    readonly iconClass: string[];\n    /**\n     * The color of the icon.\n     */\n    readonly color?: Color;\n  }\n\n  /**\n   * Enumeration for the quadrant to overlay the image on.\n   */\n  export enum IconOverlayPosition {\n    /**\n     * Overlays the top right quarter of the original image.\n     */\n    TOP_RIGHT,\n    /**\n     * Overlays the bottom right of the original image.\n     */\n    BOTTOM_RIGHT,\n    /**\n     * Overlays the bottom left segment of the original image.\n     */\n    BOTTOM_LEFT,\n    /**\n     * Occupies the top left quarter of the original icon.\n     */\n    TOP_LEFT\n  }\n\n  export namespace IconOverlayPosition {\n    /**\n     * Returns with the CSS class style for the enum.\n     */\n    export function getStyle(position: IconOverlayPosition, inSideBar?: boolean): string {\n      switch (position) {\n        case IconOverlayPosition.TOP_RIGHT:\n          return WidgetDecoration.Styles.TOP_RIGHT_CLASS;\n        case IconOverlayPosition.BOTTOM_RIGHT:\n          return inSideBar ? WidgetDecoration.Styles.BOTTOM_RIGHT_SIDEBAR_CLASS : WidgetDecoration.Styles.BOTTOM_RIGHT_CLASS;\n        case IconOverlayPosition.BOTTOM_LEFT:\n          return WidgetDecoration.Styles.BOTTOM_LEFT_CLASS;\n        case IconOverlayPosition.TOP_LEFT:\n          return WidgetDecoration.Styles.TOP_LEFT_CLASS;\n      }\n    }\n  }\n\n  /**\n   * A shape that can be optionally rendered behind the overlay icon. Can be used to further refine colors.\n   */\n  export interface IconOverlayBackground {\n    /**\n     * Either `circle` or `square`.\n     */\n    readonly shape: 'circle' | 'square';\n    /**\n     * The color of the background shape.\n     */\n    readonly color?: Color;\n  }\n\n  /**\n   * Has not effect if the widget being decorated has no associated icon.\n   */\n  export interface BaseOverlay {\n    /**\n     * The position where the decoration will be placed on the top of the original icon.\n     */\n    readonly position: IconOverlayPosition;\n    /**\n     * The color of the overlaying icon. If not specified, then the default icon color will be used.\n     */\n    readonly color?: Color;\n    /**\n     * The optional background color of the overlay icon.\n     */\n    readonly background?: IconOverlayBackground;\n  }\n\n  export interface IconOverlay extends BaseOverlay {\n    /**\n     * This should be the name of the Font Awesome icon with out the `fa fa-` prefix, just the name, for instance `paw`.\n     * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n     */\n    readonly icon: string;\n  }\n\n  export interface IconClassOverlay extends BaseOverlay {\n    /**\n     * This should be the entire Font Awesome class array, for instance ['fa', 'fa-paw']\n     * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n     */\n    readonly iconClass: string[];\n  }\n\n  /**\n   * The caption highlighting with the highlighted ranges and an optional background color.\n   */\n  export interface CaptionHighlight {\n    /**\n     * The ranges to highlight in the caption.\n     */\n    readonly ranges: CaptionHighlight.Range[];\n    /**\n     * The optional color of the text data that is being highlighted. Falls back to the default `mark` color values defined under a widget segment class.\n     */\n    readonly color?: Color;\n    /**\n     * The optional background color of the text data that is being highlighted.\n     */\n    readonly backgroundColor?: Color;\n  }\n\n  export namespace CaptionHighlight {\n    /**\n     * A pair of offset and length that has to be highlighted as a range.\n     */\n    export interface Range {\n      /**\n       * Zero based offset of the highlighted region.\n       */\n      readonly offset: number;\n      /**\n       * The length of the highlighted region.\n       */\n      readonly length: number;\n    }\n\n    export namespace Range {\n      /**\n       * `true` if the `arg` is contained in the range. The ranges are closed ranges, hence the check is inclusive.\n       */\n      export function contains(arg: number, range: Range): boolean {\n        return arg >= range.offset && arg <= (range.offset + range.length);\n      }\n    }\n\n    /**\n     * The result of a caption splitting based on the highlighting information.\n     */\n    export interface Fragment {\n      /**\n       * The text data of the fragment.\n       */\n      readonly data: string;\n      /**\n       * Has to be highlighted if defined.\n       */\n      readonly highlight?: true;\n    }\n\n    /**\n     * Splits the `caption` argument based on the ranges from the `highlight` argument.\n     */\n    export function split(caption: string, highlight: CaptionHighlight): Fragment[] {\n      const result: Fragment[] = [];\n      const ranges = highlight.ranges.slice();\n      const containerOf = (index: number) => ranges.findIndex(range => Range.contains(index, range));\n      let data = '';\n      for (let i = 0; i < caption.length; i++) {\n        const containerIndex = containerOf(i);\n        if (containerIndex === -1) {\n          data += caption[i];\n        } else {\n          if (data.length > 0) {\n            result.push({data});\n          }\n          const {length} = ranges.splice(containerIndex, 1).shift()!;\n          result.push({data: caption.substr(i, length), highlight: true});\n          data = '';\n          i = i + length - 1;\n        }\n      }\n      if (data.length > 0) {\n        result.push({data});\n      }\n      if (ranges.length !== 0) {\n        throw new Error('Error occurred when splitting the caption. There was a mismatch between the caption and the corresponding highlighting ranges.');\n      }\n      return result;\n    }\n  }\n\n  /**\n   * Encapsulates styling information that has to be applied on the widget which we decorate.\n   */\n  export interface Data {\n    /**\n     * The higher number has higher priority. If not specified, treated as `0`.\n     * When multiple decorators are available for the same item, and decoration data cannot be merged together,\n     * then the higher priority item will be applied on the decorated element and the lower priority will be ignored.\n     */\n    readonly priority?: number;\n    /**\n     * The font data for the caption.\n     */\n    readonly fontData?: FontData;\n    /**\n     * The background color of the entire row.\n     */\n    readonly backgroundColor?: Color;\n    /**\n     * Optional, leading prefixes right before the caption.\n     */\n    readonly captionPrefixes?: CaptionAffix[];\n    /**\n     * Suffixes that might come after the caption as an additional information.\n     */\n    readonly captionSuffixes?: CaptionAffix[];\n    /**\n     * Optional right-aligned decorations that appear after the widget caption and after the caption suffixes (is any).\n     */\n    readonly tailDecorations?: Array<TailDecoration | TailDecorationIcon | TailDecorationIconClass>;\n    /**\n     * Custom tooltip for the decorated item. Tooltip will be appended to the original tooltip, if any.\n     */\n    readonly tooltip?: string;\n    /**\n     * Sets the color of the icon. Ignored if the decorated item has no icon.\n     */\n    readonly iconColor?: Color;\n    /**\n     * Has not effect if given, but the widget does not have an associated image.\n     */\n    readonly iconOverlay?: IconOverlay | IconClassOverlay;\n    /**\n     * An array of ranges to highlight the caption.\n     */\n    readonly highlight?: CaptionHighlight;\n    /**\n     * A count badge for widgets.\n     */\n    readonly badge?: number;\n  }\n\n  export namespace Data {\n    /**\n     * Compares the decoration data based on the priority. Lowest priorities come first.\n     */\n    export const comparePriority = (left: Data, right: Data): number => (left.priority || 0) - (right.priority || 0);\n  }\n}\n"]}