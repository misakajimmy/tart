{"version":3,"sources":["common/command.ts"],"names":[],"mappings":"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","file":"../../src/common/command.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {inject, injectable, named} from 'inversify';\nimport {Event,} from './event';\nimport {Emitter, WaitUntilEvent} from './emitter';\nimport {Disposable, DisposableCollection} from './disposable';\nimport {ContributionProvider} from './contribution-provider';\nimport {nls} from './nls';\n\n/**\n * A command is a unique identifier of a function\n * which can be executed by a user via a keyboard shortcut,\n * a menu action or directly.\n */\nexport interface Command {\n  /**\n   * A unique identifier of this command.\n   */\n  id: string;\n  /**\n   * A label of this command.\n   */\n  label?: string;\n  originalLabel?: string;\n  /**\n   * An icon class of this command.\n   */\n  iconClass?: string;\n  /**\n   * A category of this command.\n   */\n  category?: string;\n  originalCategory?: string;\n}\n\nexport namespace Command {\n  /* Determine whether object is a Command */\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  export function is(arg: Command | any): arg is Command {\n    return !!arg && arg === Object(arg) && 'id' in arg;\n  }\n\n  /** Utility function to easily translate commands */\n  export function toLocalizedCommand(command: Command, nlsLabelKey: string = command.id, nlsCategoryKey?: string): Command {\n    return {\n      ...command,\n      label: command.label && nls.localize(nlsLabelKey, command.label),\n      originalLabel: command.label,\n      category: nlsCategoryKey && command.category && nls.localize(nlsCategoryKey, command.category) || command.category,\n      originalCategory: command.category,\n    };\n  }\n\n  export function toDefaultLocalizedCommand(command: Command): Command {\n    return {\n      ...command,\n      label: command.label && nls.localizeByDefault(command.label),\n      originalLabel: command.label,\n      category: command.category && nls.localizeByDefault(command.category),\n      originalCategory: command.category,\n    };\n  }\n\n  /** Comparator function for when sorting commands */\n  export function compareCommands(a: Command, b: Command): number {\n    if (a.label && b.label) {\n      const aCommand = (a.category ? `${a.category}: ${a.label}` : a.label).toLowerCase();\n      const bCommand = (b.category ? `${b.category}: ${b.label}` : b.label).toLowerCase();\n      return (aCommand).localeCompare(bCommand);\n    } else {\n      return 0;\n    }\n  }\n\n  /**\n   * Determine if two commands are equal.\n   *\n   * @param a the first command for comparison.\n   * @param b the second command for comparison.\n   */\n  export function equals(a: Command, b: Command): boolean {\n    return (\n        a.id === b.id &&\n        a.label === b.label &&\n        a.iconClass === b.iconClass &&\n        a.category === b.category\n    );\n  }\n}\n\n/**\n * A command handler is an implementation of a command.\n *\n * A command can have multiple handlers\n * but they should be active in different contexts,\n * otherwise first active will be executed.\n */\nexport interface CommandHandler {\n  /**\n   * Execute this handler.\n   *\n   * Don't call it directly, use `CommandService.executeCommand` instead.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  execute(...args: any[]): any;\n\n  /**\n   * Test whether this handler is enabled (active).\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isEnabled?(...args: any[]): boolean;\n\n  /**\n   * Test whether menu items for this handler should be visible.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isVisible?(...args: any[]): boolean;\n\n  /**\n   * Test whether menu items for this handler should be toggled.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isToggled?(...args: any[]): boolean;\n}\n\nexport const CommandContribution = Symbol('CommandContribution');\n\n/**\n * The command contribution should be implemented to register custom commands and handler.\n */\nexport interface CommandContribution {\n  /**\n   * Register commands and handlers.\n   */\n  registerCommands(commands: CommandRegistry): void;\n}\n\nexport interface CommandEvent {\n  commandId: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  args: any[]\n}\n\nexport interface WillExecuteCommandEvent extends WaitUntilEvent, CommandEvent {\n}\n\nexport const commandServicePath = '/services/commands';\nexport const CommandService = Symbol('CommandService');\n\n/**\n * The command service should be used to execute commands.\n */\nexport interface CommandService {\n  /**\n   * An event is emitted when a command is about to be executed.\n   *\n   * It can be used to install or activate a command handler.\n   */\n  readonly onWillExecuteCommand: Event<WillExecuteCommandEvent>;\n  /**\n   * An event is emitted when a command was executed.\n   */\n  readonly onDidExecuteCommand: Event<CommandEvent>;\n\n  /**\n   * Execute the active handler for the given command and arguments.\n   *\n   * Reject if a command cannot be executed.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  executeCommand<T>(command: string, ...args: any[]): Promise<T | undefined>;\n}\n\n/**\n * The command registry manages commands and handlers.\n */\n@injectable()\nexport class CommandRegistry implements CommandService {\n\n  protected readonly _commands: { [id: string]: Command } = {};\n  protected readonly _handlers: { [id: string]: CommandHandler[] } = {};\n\n  protected readonly toUnregisterCommands = new Map<string, Disposable>();\n  protected readonly onWillExecuteCommandEmitter = new Emitter<WillExecuteCommandEvent>();\n  readonly onWillExecuteCommand = this.onWillExecuteCommandEmitter.event;\n  protected readonly onDidExecuteCommandEmitter = new Emitter<CommandEvent>();\n  readonly onDidExecuteCommand = this.onDidExecuteCommandEmitter.event;\n\n  constructor(\n      @inject(ContributionProvider) @named(CommandContribution)\n      protected readonly contributionProvider: ContributionProvider<CommandContribution>\n  ) {\n  }\n\n  // List of recently used commands.\n  protected _recent: Command[] = [];\n\n  /**\n   * Get the list of recently used commands.\n   */\n  get recent(): Command[] {\n    return this._recent;\n  }\n\n  /**\n   * Set the list of recently used commands.\n   * @param commands the list of recently used commands.\n   */\n  set recent(commands: Command[]) {\n    this._recent = commands;\n  }\n\n  /**\n   * Get all registered commands.\n   */\n  get commands(): Command[] {\n    const commands: Command[] = [];\n    for (const id of this.commandIds) {\n      const cmd = this.getCommand(id);\n      if (cmd) {\n        commands.push(cmd);\n      }\n    }\n    return commands;\n  }\n\n  /**\n   * Get all registered commands identifiers.\n   */\n  get commandIds(): string[] {\n    return Object.keys(this._commands);\n  }\n\n  onStart(): void {\n    const contributions = this.contributionProvider.getContributions();\n    for (const contrib of contributions) {\n      contrib.registerCommands(this);\n    }\n  }\n\n  /**\n   * Register the given command and handler if present.\n   *\n   * Throw if a command is already registered for the given command identifier.\n   */\n  registerCommand(command: Command, handler?: CommandHandler): Disposable {\n    if (this._commands[command.id]) {\n      console.warn(`A command ${command.id} is already registered.`);\n      return Disposable.NULL;\n    }\n    const toDispose = new DisposableCollection(this.doRegisterCommand(command));\n    if (handler) {\n      toDispose.push(this.registerHandler(command.id, handler));\n    }\n    this.toUnregisterCommands.set(command.id, toDispose);\n    toDispose.push(Disposable.create(() => this.toUnregisterCommands.delete(command.id)));\n    return toDispose;\n  }\n\n  /**\n   * Unregister command from the registry\n   *\n   * @param command\n   */\n  unregisterCommand(command: Command): void;\n\n  /**\n   * Unregister command from the registry\n   *\n   * @param id\n   */\n  unregisterCommand(id: string): void;\n\n  unregisterCommand(commandOrId: Command | string): void {\n    const id = Command.is(commandOrId) ? commandOrId.id : commandOrId;\n    const toUnregister = this.toUnregisterCommands.get(id);\n    if (toUnregister) {\n      toUnregister.dispose();\n    }\n  }\n\n  /**\n   * Register the given handler for the given command identifier.\n   *\n   * If there is already a handler for the given command\n   * then the given handler is registered as more specific, and\n   * has higher priority during enablement, visibility and toggle state evaluations.\n   */\n  registerHandler(commandId: string, handler: CommandHandler): Disposable {\n    let handlers = this._handlers[commandId];\n    if (!handlers) {\n      this._handlers[commandId] = handlers = [];\n    }\n    handlers.unshift(handler);\n    return {\n      dispose: () => {\n        const idx = handlers.indexOf(handler);\n        if (idx >= 0) {\n          handlers.splice(idx, 1);\n        }\n      }\n    };\n  }\n\n  /**\n   * Test whether there is an active handler for the given command.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isEnabled(command: string, ...args: any[]): boolean {\n    return typeof this.getActiveHandler(command, ...args) !== 'undefined';\n  }\n\n  /**\n   * Test whether there is a visible handler for the given command.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isVisible(command: string, ...args: any[]): boolean {\n    return typeof this.getVisibleHandler(command, ...args) !== 'undefined';\n  }\n\n  /**\n   * Test whether there is a toggled handler for the given command.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  isToggled(command: string, ...args: any[]): boolean {\n    return typeof this.getToggledHandler(command, ...args) !== 'undefined';\n  }\n\n  /**\n   * Execute the active handler for the given command and arguments.\n   *\n   * Reject if a command cannot be executed.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  async executeCommand<T>(commandId: string, ...args: any[]): Promise<T | undefined> {\n    const handler = this.getActiveHandler(commandId, ...args);\n    if (handler) {\n      await this.fireWillExecuteCommand(commandId, args);\n      const result = await handler.execute(...args);\n      this.onDidExecuteCommandEmitter.fire({commandId, args});\n      return result;\n    }\n    throw Object.assign(new Error(`The command '${commandId}' cannot be executed. There are no active handlers available for the command.`), {code: 'NO_ACTIVE_HANDLER'});\n  }\n\n  /**\n   * Get a visible handler for the given command or `undefined`.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getVisibleHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n    const handlers = this._handlers[commandId];\n    if (handlers) {\n      for (const handler of handlers) {\n        try {\n          if (!handler.isVisible || handler.isVisible(...args)) {\n            return handler;\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Get an active handler for the given command or `undefined`.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getActiveHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n    const handlers = this._handlers[commandId];\n    if (handlers) {\n      for (const handler of handlers) {\n        try {\n          if (!handler.isEnabled || handler.isEnabled(...args)) {\n            return handler;\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Get a toggled handler for the given command or `undefined`.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getToggledHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n    const handlers = this._handlers[commandId];\n    if (handlers) {\n      for (const handler of handlers) {\n        try {\n          if (handler.isToggled && handler.isToggled(...args)) {\n            return handler;\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Returns with all handlers for the given command. If the command does not have any handlers,\n   * or the command is not registered, returns an empty array.\n   */\n  getAllHandlers(commandId: string): CommandHandler[] {\n    const handlers = this._handlers[commandId];\n    return handlers ? handlers.slice() : [];\n  }\n\n  /**\n   * Get a command for the given command identifier.\n   */\n  getCommand(id: string): Command | undefined {\n    return this._commands[id];\n  }\n\n  /**\n   * Adds a command to recently used list.\n   * Prioritizes commands that were recently executed to be most recent.\n   *\n   * @param recent a recent command, or array of recent commands.\n   */\n  addRecentCommand(recent: Command | Command[]): void {\n    if (Array.isArray(recent)) {\n      recent.forEach((command: Command) => this.addRecentCommand(command));\n    } else {\n      // Determine if the command currently exists in the recently used list.\n      const index = this._recent.findIndex((command: Command) => Command.equals(recent, command));\n      // If the command exists, remove it from the array so it can later be placed at the top.\n      if (index >= 0) {\n        this._recent.splice(index, 1);\n      }\n      // Add the recent command to the beginning of the array (most recent).\n      this._recent.unshift(recent);\n    }\n  }\n\n  /**\n   * Clear the list of recently used commands.\n   */\n  clearCommandHistory(): void {\n    this.recent = [];\n  }\n\n  protected doRegisterCommand(command: Command): Disposable {\n    this._commands[command.id] = command;\n    return {\n      dispose: () => {\n        delete this._commands[command.id];\n      }\n    };\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  protected async fireWillExecuteCommand(commandId: string, args: any[] = []): Promise<void> {\n    await WaitUntilEvent.fire(this.onWillExecuteCommandEmitter, {commandId, args}, 30000);\n  }\n\n}\n"]}