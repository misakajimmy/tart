{"version":3,"sources":["common/path.ts"],"names":[],"mappings":"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","file":"../../src/common/path.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * On POSIX:\n * ┌──────────────────────┬────────────┐\n * │          dir         │    base    │\n * ├──────┬               ├──────┬─────┤\n * │ root │               │ name │ ext │\n * \"  /     home/user/dir / file  .txt \"\n * └──────┴───────────────┴──────┴─────┘\n *\n * On Windows:\n * ┌──────────────────────┬────────────┐\n * │           dir        │    base    │\n * ├──────┬               ├──────┬─────┤\n * │ root │               │ name │ ext │\n * \"  /c: / home/user/dir / file  .txt \"\n * └──────┴───────────────┴──────┴─────┘\n */\nexport class Path {\n  static separator: '/' = '/';\n  readonly isAbsolute: boolean;\n  readonly isRoot: boolean;\n  readonly root: Path | undefined;\n  readonly base: string;\n  readonly name: string;\n  readonly ext: string;\n  private readonly raw: string;\n\n  /**\n   * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n   */\n  constructor(\n      raw: string\n  ) {\n    raw = Path.normalizePathSeparator(raw);\n    this.raw = Path.normalizeDrive(raw);\n    const firstIndex = this.raw.indexOf(Path.separator);\n    const lastIndex = this.raw.lastIndexOf(Path.separator);\n    this.isAbsolute = firstIndex === 0;\n    this.base = lastIndex === -1 ? this.raw : this.raw.substr(lastIndex + 1);\n    this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n    this.root = this.computeRoot();\n\n    const extIndex = this.base.lastIndexOf('.');\n    this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n    this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n  }\n\n  private _dir: Path;\n\n  /**\n   * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n   */\n  get dir(): Path {\n    if (this._dir === undefined) {\n      this._dir = this.computeDir();\n    }\n    return this._dir;\n  }\n\n  /**\n   * Returns `true` if this has a parent directory, `false` otherwise.\n   *\n   * _This implementation returns `true` if and only if this is not the root dir and\n   * there is a path separator in the raw path._\n   */\n  get hasDir(): boolean {\n    return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n  }\n\n  static isDrive(segment: string): boolean {\n    return segment.endsWith(':');\n  }\n\n  /**\n   * vscode-uri always normalizes drive letters to lower case:\n   * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n   * Tart path should be adjusted to this.\n   */\n  static normalizeDrive(path: string): string {\n    // lower-case windows drive letters in /C:/fff or C:/fff\n    if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n      const code = path.charCodeAt(1);\n      if (code >= 65 /* A */ && code <= 90 /* Z */) {\n        path = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n      }\n    } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n      const code = path.charCodeAt(0);\n      if (code >= 65 /* A */ && code <= 90 /* Z */) {\n        path = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"c:\".length === 2\n      }\n      if (path.charCodeAt(0) !== 47 /* '/' */) {\n        path = `${String.fromCharCode(47)}${path}`;\n      }\n    }\n    return path;\n  }\n\n  /**\n   * Normalize path separator to use Path.separator\n   * @param Path candidate to normalize\n   * @returns Normalized string path\n   */\n  static normalizePathSeparator(path: string): string {\n    return path.split(/[\\\\]/).join(Path.separator);\n  }\n\n  /**\n   * Tildify path, replacing `home` with `~` if user's `home` is present at the beginning of the path.\n   * This is a non-operation for Windows.\n   *\n   * @param resourcePath\n   * @param home\n   */\n  static tildify(resourcePath: string, home: string): string {\n    const path = new Path(resourcePath);\n    const isWindows = path.root && Path.isDrive(path.root.base);\n\n    if (!isWindows && home && resourcePath.indexOf(`${home}/`) === 0) {\n      return resourcePath.replace(`${home}/`, '~/');\n    }\n\n    return resourcePath;\n  }\n\n  /**\n   * Untildify path, replacing `~` with `home` if `~` present at the beginning of the path.\n   * This is a non-operation for Windows.\n   *\n   * @param resourcePath\n   * @param home\n   */\n  static untildify(resourcePath: string, home: string): string {\n    if (resourcePath.startsWith('~')) {\n      const untildifiedResource = resourcePath.replace(/^~/, home);\n      const untildifiedPath = new Path(untildifiedResource);\n      const isWindows = untildifiedPath.root && Path.isDrive(untildifiedPath.root.base);\n      if (!isWindows && home && untildifiedResource.startsWith(`${home}`)) {\n        return untildifiedResource;\n      }\n    }\n    return resourcePath;\n  }\n\n  join(...paths: string[]): Path {\n    const relativePath = paths.filter(s => !!s).join(Path.separator);\n    if (!relativePath) {\n      return this;\n    }\n    if (this.raw.endsWith(Path.separator)) {\n      return new Path(this.raw + relativePath);\n    }\n    return new Path(this.raw + Path.separator + relativePath);\n  }\n\n  toString(): string {\n    return this.raw;\n  }\n\n  relative(path: Path): Path | undefined {\n    if (this.raw === path.raw) {\n      return new Path('');\n    }\n    if (!this.raw || !path.raw) {\n      return undefined;\n    }\n    const raw = this.base ? this.raw + Path.separator : this.raw;\n    if (!path.raw.startsWith(raw)) {\n      return undefined;\n    }\n    const relativePath = path.raw.substr(raw.length);\n    return new Path(relativePath);\n  }\n\n  isEqualOrParent(path: Path): boolean {\n    return !!this.relative(path);\n  }\n\n  relativity(path: Path): number {\n    const relative = this.relative(path);\n    if (relative) {\n      const relativeStr = relative.toString();\n      if (relativeStr === '') {\n        return 0;\n      }\n      return relativeStr.split(Path.separator).length;\n    }\n    return -1;\n  }\n\n  /*\n   * return a normalized Path, resolving '..' and '.' segments\n   */\n  normalize(): Path {\n    const trailingSlash = this.raw.endsWith('/');\n    const pathArray = this.toString().split('/');\n    const resultArray: string[] = [];\n    pathArray.forEach((value, index) => {\n      if (!value || value === '.') {\n        return;\n      }\n      if (value === '..') {\n        if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n          resultArray.pop();\n        } else if (!this.isAbsolute) {\n          resultArray.push('..');\n        }\n      } else {\n        resultArray.push(value);\n      }\n    });\n    if (resultArray.length === 0) {\n      if (this.isRoot) {\n        return new Path('/');\n      } else {\n        return new Path('.');\n      }\n    }\n    return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n  }\n\n  protected computeRoot(): Path | undefined {\n    // '/' -> '/'\n    // '/c:' -> '/c:'\n    if (this.isRoot) {\n      return this;\n    }\n    // 'foo/bar' -> `undefined`\n    if (!this.isAbsolute) {\n      return undefined;\n    }\n    const index = this.raw.indexOf(Path.separator, Path.separator.length);\n    if (index === -1) {\n      // '/foo/bar' -> '/'\n      return new Path(Path.separator);\n    }\n    // '/c:/foo/bar' -> '/c:'\n    // '/foo/bar' -> '/'\n    return new Path(this.raw.substr(0, index)).root;\n  }\n\n  protected computeDir(): Path {\n    if (!this.hasDir) {\n      return this;\n    }\n    const lastIndex = this.raw.lastIndexOf(Path.separator);\n    if (this.isAbsolute) {\n      const firstIndex = this.raw.indexOf(Path.separator);\n      if (firstIndex === lastIndex) {\n        return new Path(this.raw.substr(0, firstIndex + 1));\n      }\n    }\n    return new Path(this.raw.substr(0, lastIndex));\n  }\n}\n"]}