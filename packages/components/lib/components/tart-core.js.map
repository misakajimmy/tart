{"version":3,"sources":["components/tart-core.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAC,MAAM,OAAO,CAAC;AACzD,OAAO,EAAC,mBAAmB,EAAC,MAAM,6CAA6C,CAAC;AAChF,OAAO,EAAC,eAAe,EAAC,MAAM,uBAAuB,CAAC;AACtD,OAAO,QAAQ,MAAM,qBAAqB,CAAC;AAC3C,OAAO,cAAc,MAAM,2BAA2B,CAAC;AACvD,OAAO,UAAU,MAAM,uBAAuB,CAAC;AAC/C,OAAO,UAAU,MAAM,uBAAuB,CAAC;AAC/C,OAAO,aAAa,MAAM,0BAA0B,CAAC;AACrD,OAAO,aAAa,MAAM,0BAA0B,CAAC;AAErD,IAAI,MAAM,GAAG,KAAK,CAAC;AAMnB,MAAM,UAAU,QAAQ,CAAC,KAAqB;IAC5C,MAAM,OAAO,GAAG,MAAM,CAAiB,SAAS,CAAC,CAAC;IAClD,MAAM,CAAC,eAAe,CAAC,GAAG,QAAQ,CAAkB,IAAI,eAAe,EAAE,CAAC,CAAC;IAE3E,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QAC/C,IAAI,CAAC,MAAM,EAAE;YACX,MAAM,GAAG,IAAI,CAAC;YACd,MAAM,OAAO,GAAG;gBACd,GAAG,CAAC;gBACJ,QAAQ,CAAC,IAAI,EAAE;gBACf,cAAc,CAAC,IAAI,EAAE;gBACrB,UAAU,CAAC,IAAI,EAAE;gBACjB,UAAU,CAAC,IAAI,EAAE;gBACjB,aAAa,CAAC,IAAI,EAAE;gBACpB,aAAa,CAAC,IAAI,EAAE;aACrB,CAAC;YACF,eAAe,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;YAC9C,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;gBACX,eAAe,CAAC,UAAU,CAAsB,mBAAmB,CAAC,CAAC,KAAK,CAAC,EAAC,IAAI,EAAE,OAAO,CAAC,OAAO,EAAC,CAAC,CAAC;YACtG,CAAC,CAAC,CAAC;SACJ;IACH,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IAElB,OAAO,6BAAK,SAAS,EAAE,WAAW,EAAE,GAAG,EAAE,OAAO,GAC1C,CAAC;AACT,CAAC","file":"../../src/components/tart-core.js","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\r\nimport {FrontendApplication} from '@tart/core/lib/browser/frontend-application';\r\nimport {ContainerLoader} from '@tart/core/lib/common';\r\nimport CoreInit from '@tart/core/lib/init';\r\nimport FilesystemInit from '@tart/filesystem/lib/init';\r\nimport EditorInit from '@tart/editor/lib/init';\r\nimport MonacoInit from '@tart/monaco/lib/init';\r\nimport WorkspaceInit from '@tart/workspace/lib/init';\r\nimport NavigatorInit from '@tart/navigator/lib/init';\r\n\r\nlet inited = false;\r\n\r\nexport interface ITartCoreProps {\r\n  modules?: [];\r\n}\r\n\r\nexport function TartCore(props: ITartCoreProps) {\r\n  const coreRef = useRef<HTMLDivElement>(undefined);\r\n  const [containerLoader] = useState<ContainerLoader>(new ContainerLoader());\r\n\r\n  useEffect(() => {\r\n    const m = !!props.modules ? props.modules : [];\r\n    if (!inited) {\r\n      inited = true;\r\n      const modules = [\r\n        ...m,\r\n        CoreInit.init(),\r\n        FilesystemInit.init(),\r\n        EditorInit.init(),\r\n        MonacoInit.init(),\r\n        WorkspaceInit.init(),\r\n        NavigatorInit.init(),\r\n      ];\r\n      containerLoader.loadsAsync(modules).then(() => {\r\n      }).then(() => {\r\n        containerLoader.getService<FrontendApplication>(FrontendApplication).start({host: coreRef.current});\r\n      });\r\n    }\r\n  }, props.modules);\r\n\r\n  return <div className={'tart-core'} ref={coreRef}>\r\n  </div>;\r\n}\r\n"]}