{"version":3,"sources":["browser/monaco-frontend-module.ts"],"names":[],"mappings":"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","file":"../../src/browser/monaco-frontend-module.js","sourcesContent":["import '../assets/style/index.css';\r\n// import '../assets/style/symbol-icons.css';\r\n// import '../assets/style/symbol-icons.svg';\r\nimport {ContainerModule, decorate, injectable, interfaces} from 'inversify';\r\nimport {ColorRegistry} from '@tart/core/lib/browser/color-registry';\r\nimport {QuickInputService} from '@tart/core/lib/common/quick-pick-service';\r\nimport {bindContributionProvider, CommandContribution, MenuContribution} from '@tart/core/lib/common';\r\nimport {MonacoColorRegistry} from './monaco-color-registry';\r\nimport {MonacoThemingService} from './monaco-theming-service';\r\nimport MonacoTextmateModuleBinder from './textmate/monaco-textmate-frontend-bindings';\r\nimport {MonacoQuickInputImplementation, MonacoQuickInputService} from './monaco-quick-input-service';\r\nimport {MonacoEditorFactory, MonacoEditorProvider} from './monaco-editor-provider';\r\nimport {MonacoEditorCommandHandlers} from './monaco-command';\r\nimport {MonacoEditorService} from './monaco-editor-service';\r\nimport {MonacoToProtocolConverter} from './monaco-to-protocol-converter';\r\nimport {\r\n  ContextKeyService,\r\n  createPreferenceProxy,\r\n  KeybindingContribution,\r\n  OVERRIDE_PROPERTY_PATTERN,\r\n  PreferenceChange,\r\n  PreferenceSchemaProvider,\r\n  PreferenceScope,\r\n  PreferenceService,\r\n  QuickAccessContribution,\r\n  QuickAccessRegistry\r\n} from '@tart/core';\r\nimport {MonacoKeybindingContribution} from './monaco-keybinding';\r\nimport {MonacoCommandRegistry} from './monaco-command-registry';\r\nimport {MonacoEditorModelFactory, MonacoTextModelService} from './monaco-text-model-service';\r\nimport {ProtocolToMonacoConverter} from './protocol-to-monaco-converter';\r\nimport {MonacoContextMenuService} from './monaco-context-menu';\r\nimport {MonacoEditorServices} from './monaco-editor';\r\nimport {MonacoDiffNavigatorFactory} from './monaco-diff-navigator-factory';\r\nimport {MonacoCommandService, MonacoCommandServiceFactory} from './monaco-command-service';\r\nimport {MonacoContextKeyService} from './monaco-context-key-service';\r\nimport {MonacoBulkEditService} from './monaco-bulk-edit-service';\r\nimport {MonacoQuickAccessRegistry} from './monaco-quick-access-registry';\r\nimport {MonacoLanguages} from './monaco-languages';\r\nimport {LanguageService} from '@tart/core/lib/browser/language-service';\r\nimport {WorkspaceSymbolCommand} from './workspace-symbol-command';\r\nimport {TextEditorProvider} from '@tart/editor/lib/browser/editor';\r\nimport {DiffNavigatorProvider} from '@tart/editor/lib/browser/diff-navigator';\r\n\r\ndecorate(injectable(), monaco.contextKeyService.ContextKeyService);\r\n\r\nMonacoThemingService.init();\r\nexport const MonacoFrontendModule = new ContainerModule((bind, unbind, isBound, rebind) => {\r\n  bind(MonacoThemingService).toSelf().inSingletonScope();\r\n\r\n  bind(MonacoContextKeyService).toSelf().inSingletonScope();\r\n  rebind(ContextKeyService).toService(MonacoContextKeyService);\r\n\r\n  bind(MonacoCommandRegistry).toSelf().inSingletonScope();\r\n\r\n  bind(MonacoConfigurationService).toDynamicValue(({container}) =>\r\n      createMonacoConfigurationService(container)\r\n  ).inSingletonScope();\r\n  bind(monaco.contextKeyService.ContextKeyService).toDynamicValue(({container}) =>\r\n      new monaco.contextKeyService.ContextKeyService(container.get(MonacoConfigurationService))\r\n  ).inSingletonScope();\r\n\r\n  bind(MonacoToProtocolConverter).toSelf().inSingletonScope();\r\n  bind(ProtocolToMonacoConverter).toSelf().inSingletonScope();\r\n\r\n  bind(MonacoLanguages).toSelf().inSingletonScope();\r\n  rebind(LanguageService).toService(MonacoLanguages);\r\n  bind(WorkspaceSymbolCommand).toSelf().inSingletonScope();\r\n  for (const identifier of [CommandContribution, KeybindingContribution, MenuContribution, QuickAccessContribution]) {\r\n    bind(identifier).toService(WorkspaceSymbolCommand);\r\n  }\r\n\r\n  bind(MonacoBulkEditService).toSelf().inSingletonScope();\r\n  bind(MonacoEditorService).toSelf().inSingletonScope();\r\n  bind(MonacoTextModelService).toSelf().inSingletonScope();\r\n  bind(MonacoContextMenuService).toSelf().inSingletonScope();\r\n  bind(MonacoEditorServices).toSelf().inSingletonScope();\r\n  bind(MonacoEditorProvider).toSelf().inSingletonScope();\r\n  bindContributionProvider(bind, MonacoEditorFactory);\r\n  bindContributionProvider(bind, MonacoEditorModelFactory);\r\n  bind(MonacoCommandService).toSelf().inTransientScope();\r\n  bind(MonacoCommandServiceFactory).toAutoFactory(MonacoCommandService);\r\n\r\n  bind(TextEditorProvider).toProvider(context =>\r\n      uri => context.container.get(MonacoEditorProvider).get(uri)\r\n  );\r\n\r\n  bind(MonacoQuickAccessRegistry).toSelf().inSingletonScope();\r\n  bind(QuickAccessRegistry).toService(MonacoQuickAccessRegistry);\r\n\r\n  bind(MonacoDiffNavigatorFactory).toSelf().inSingletonScope();\r\n  bind(DiffNavigatorProvider).toFactory(context =>\r\n      editor => context.container.get(MonacoEditorProvider).getDiffNavigator(editor)\r\n  );\r\n\r\n  bind(CommandContribution).to(MonacoEditorCommandHandlers).inSingletonScope();\r\n\r\n  bind(MonacoColorRegistry).toSelf().inSingletonScope();\r\n  rebind(ColorRegistry).toService(MonacoColorRegistry);\r\n\r\n  MonacoTextmateModuleBinder(bind, unbind, isBound, rebind);\r\n\r\n  bind(MonacoKeybindingContribution).toSelf().inSingletonScope();\r\n  bind(KeybindingContribution).toService(MonacoKeybindingContribution);\r\n\r\n  bind(MonacoQuickInputImplementation).toSelf().inSingletonScope();\r\n\r\n  bind(MonacoQuickInputService).toSelf().inSingletonScope();\r\n  bind(QuickInputService).toService(MonacoQuickInputService);\r\n});\r\n\r\n\r\nexport const MonacoConfigurationService = Symbol('MonacoConfigurationService');\r\n\r\nexport function createMonacoConfigurationService(container: interfaces.Container): monaco.services.IConfigurationService {\r\n  const preferences = container.get<PreferenceService>(PreferenceService);\r\n  const preferenceSchemaProvider = container.get<PreferenceSchemaProvider>(PreferenceSchemaProvider);\r\n  const service = monaco.services.StaticServices.configurationService.get();\r\n  const _configuration = service._configuration;\r\n\r\n  _configuration.getValue = (section, overrides) => {\r\n    const overrideIdentifier = overrides && 'overrideIdentifier' in overrides && overrides['overrideIdentifier'] as string || undefined;\r\n    const resourceUri = overrides && 'resource' in overrides && !!overrides['resource'] && overrides['resource'].toString();\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const proxy = createPreferenceProxy<{ [key: string]: any }>(preferences, preferenceSchemaProvider.getCombinedSchema(), {\r\n      resourceUri, overrideIdentifier, style: 'both'\r\n    });\r\n    if (section) {\r\n      return proxy[section];\r\n    }\r\n    return proxy;\r\n  };\r\n\r\n  const toTarget = (scope: PreferenceScope): monaco.services.ConfigurationTarget => {\r\n    switch (scope) {\r\n      case PreferenceScope.Default:\r\n        return monaco.services.ConfigurationTarget.DEFAULT;\r\n        // case PreferenceScope.User:\r\n        //     return monaco.services.ConfigurationTarget.USER;\r\n        // case PreferenceScope.Workspace:\r\n        //     return monaco.services.ConfigurationTarget.WORKSPACE;\r\n        // case PreferenceScope.Folder:\r\n        //     return monaco.services.ConfigurationTarget.WORKSPACE_FOLDER;\r\n    }\r\n  };\r\n\r\n  interface FireDidChangeConfigurationContext {\r\n    changes: PreferenceChange[];\r\n    affectedKeys: Set<string>;\r\n    keys: Set<string>;\r\n    overrides: Map<string, Set<string>>\r\n  }\r\n\r\n  const newFireDidChangeConfigurationContext = (): FireDidChangeConfigurationContext => ({\r\n    changes: [],\r\n    affectedKeys: new Set<string>(),\r\n    keys: new Set<string>(),\r\n    overrides: new Map<string, Set<string>>()\r\n  });\r\n  const fireDidChangeConfiguration = (source: monaco.services.ConfigurationTarget, context: FireDidChangeConfigurationContext): void => {\r\n    if (!context.affectedKeys.size) {\r\n      return;\r\n    }\r\n    const overrides: [string, string[]][] = [];\r\n    for (const [override, values] of context.overrides) {\r\n      overrides.push([override, [...values]]);\r\n    }\r\n    service._onDidChangeConfiguration.fire({\r\n      change: {\r\n        keys: [...context.keys],\r\n        overrides\r\n      },\r\n      affectedKeys: [...context.affectedKeys],\r\n      source,\r\n      affectsConfiguration: (prefix, options) => {\r\n        if (!context.affectedKeys.has(prefix)) {\r\n          return false;\r\n        }\r\n        for (const change of context.changes) {\r\n          const overridden = preferences.overriddenPreferenceName(change.preferenceName);\r\n          const preferenceName = overridden ? overridden.preferenceName : change.preferenceName;\r\n          if (preferenceName.startsWith(prefix)) {\r\n            if (options?.overrideIdentifier !== undefined) {\r\n              if (overridden && overridden.overrideIdentifier !== options?.overrideIdentifier) {\r\n                continue;\r\n              }\r\n            }\r\n            if (change.affects(options?.resource?.toString())) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n    });\r\n  };\r\n\r\n  preferences.onPreferencesChanged(event => {\r\n    let source: monaco.services.ConfigurationTarget | undefined;\r\n    let context = newFireDidChangeConfigurationContext();\r\n    for (let key of Object.keys(event)) {\r\n      const change = event[key];\r\n      const target = toTarget(change.scope);\r\n      if (source !== undefined && target !== source) {\r\n        fireDidChangeConfiguration(source, context);\r\n        context = newFireDidChangeConfigurationContext();\r\n      }\r\n      context.changes.push(change);\r\n      source = target;\r\n\r\n      let overrideKeys: Set<string> | undefined;\r\n      if (key.startsWith('[')) {\r\n        const index = key.indexOf('.');\r\n        const override = key.substring(0, index);\r\n        const overrideIdentifier = override.match(OVERRIDE_PROPERTY_PATTERN)?.[1];\r\n        if (overrideIdentifier) {\r\n          context.keys.add(override);\r\n          context.affectedKeys.add(override);\r\n          overrideKeys = context.overrides.get(overrideIdentifier) || new Set<string>();\r\n          context.overrides.set(overrideIdentifier, overrideKeys);\r\n          key = key.substring(index + 1);\r\n        }\r\n      }\r\n      while (key) {\r\n        if (overrideKeys) {\r\n          overrideKeys.add(key);\r\n        }\r\n        context.keys.add(key);\r\n        context.affectedKeys.add(key);\r\n        const index = key.lastIndexOf('.');\r\n        key = key.substring(0, index);\r\n      }\r\n    }\r\n    if (source) {\r\n      fireDidChangeConfiguration(source, context);\r\n    }\r\n  });\r\n\r\n  return service;\r\n}\r\n"]}